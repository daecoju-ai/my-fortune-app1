import streamlit as st
from datetime import datetime, timedelta
import random
import re
import json
import base64
from io import BytesIO

# ---- Google Sheet ----
try:
    import gspread
    from google.oauth2.service_account import Credentials
except Exception:
    gspread = None
    Credentials = None

# ---- Image (Pillow) ----
try:
    from PIL import Image, ImageDraw, ImageFont
except Exception:
    Image = None
    ImageDraw = None
    ImageFont = None

# =========================================================
# 0) App Config
# =========================================================
APP_URL = "https://my-fortune.streamlit.app"
SPREADSHEET_ID = "1WvuKXx2if2WvxmQaxkqzFW-BzDEWWma9hZgCr2jJQYY"  # ê¸°ì–µ ê³ ì •
SHEET_NAME = "ì‹œíŠ¸1"  # ê³ ì •

st.set_page_config(
    page_title="2026 Fortune | ë +MBTI+ì‚¬ì£¼+ì˜¤ëŠ˜/ë‚´ì¼",
    page_icon="ğŸ”®",
    layout="centered"
)

# =========================================================
# 1) SEO Inject (meta + JSON-LD)
# =========================================================
def inject_seo(lang_code: str):
    desc_map = {
        "ko": "2026ë…„ ë ìš´ì„¸ + MBTI + ì‚¬ì£¼ + ì˜¤ëŠ˜/ë‚´ì¼ ìš´ì„¸ë¥¼ í•œ ë²ˆì—! ë¬´ë£Œ ìš´ì„¸ ì„œë¹„ìŠ¤. (í•œêµ­ì–´ ë¯¸ë‹ˆê²Œì„ ì´ë²¤íŠ¸ í¬í•¨)",
        "en": "Free 2026 Zodiac + MBTI + Saju + Daily/Tomorrow fortune. (Korean mini-game event)",
        "ja": "2026å¹´ã®å¹²æ”¯é‹å‹¢ï¼‹MBTIï¼‹å››æŸ±ï¼‹ä»Šæ—¥/æ˜æ—¥ã®é‹å‹¢ã‚’ç„¡æ–™ã§ã€‚",
        "zh": "å…è´¹ï¼š2026ç”Ÿè‚–è¿åŠ¿ + MBTI + å››æŸ± + ä»Šæ—¥/æ˜æ—¥è¿åŠ¿ã€‚",
        "ru": "Ğ‘ĞµÑĞ¿Ğ»Ğ°Ñ‚Ğ½Ğ¾: 2026 Ğ·Ğ¾Ğ´Ğ¸Ğ°Ğº + MBTI + ÑĞ°Ğ´Ğ¶Ñƒ + ÑƒĞ´Ğ°Ñ‡Ğ° ÑĞµĞ³Ğ¾Ğ´Ğ½Ñ/Ğ·Ğ°Ğ²Ñ‚Ñ€Ğ°.",
        "hi": "à¤®à¥à¤«à¤¼à¥à¤¤: 2026 à¤°à¤¾à¤¶à¤¿ + MBTI + à¤¸à¤¾à¤œà¥‚ + à¤†à¤œ/à¤•à¤² à¤•à¥€ à¤•à¤¿à¤¸à¥à¤®à¤¤à¥¤"
    }
    kw_map = {
        "ko": "2026 ìš´ì„¸, ë ìš´ì„¸, MBTI ìš´ì„¸, ì‚¬ì£¼, ì˜¤ëŠ˜ ìš´ì„¸, ë‚´ì¼ ìš´ì„¸, ë¬´ë£Œ ìš´ì„¸, íƒ€ë¡œ, ì—°ì• ìš´, ì¬ë¬¼ìš´, ê±´ê°•ìš´",
        "en": "2026 fortune, zodiac, MBTI, saju, today fortune, tomorrow fortune, free, tarot",
        "ja": "2026 é‹å‹¢, å¹²æ”¯, MBTI, å››æŸ±, ä»Šæ—¥ã®é‹å‹¢, æ˜æ—¥ã®é‹å‹¢, ç„¡æ–™, ã‚¿ãƒ­ãƒƒãƒˆ",
        "zh": "2026 è¿åŠ¿, ç”Ÿè‚–, MBTI, å››æŸ±, ä»Šæ—¥è¿åŠ¿, æ˜æ—¥è¿åŠ¿, å…è´¹, å¡”ç½—",
        "ru": "2026 Ğ³Ğ¾Ñ€Ğ¾ÑĞºĞ¾Ğ¿, Ğ·Ğ¾Ğ´Ğ¸Ğ°Ğº, MBTI, ÑĞ°Ğ´Ğ¶Ñƒ, ÑƒĞ´Ğ°Ñ‡Ğ° ÑĞµĞ³Ğ¾Ğ´Ğ½Ñ, Ğ±ĞµÑĞ¿Ğ»Ğ°Ñ‚Ğ½Ğ¾, Ñ‚Ğ°Ñ€Ğ¾",
        "hi": "2026 à¤°à¤¾à¤¶à¤¿à¤«à¤², à¤°à¤¾à¤¶à¤¿, MBTI, à¤†à¤œ à¤•à¤¾ à¤°à¤¾à¤¶à¤¿à¤«à¤², à¤•à¤² à¤•à¤¾ à¤°à¤¾à¤¶à¤¿à¤«à¤², à¤®à¥à¤«à¥à¤¤, à¤Ÿà¥ˆà¤°à¥‹"
    }

    description = desc_map.get(lang_code, desc_map["en"])
    keywords = kw_map.get(lang_code, kw_map["en"])
    title = "2026 Fortune | Zodiac + MBTI + Saju + Today/Tomorrow"
    if lang_code == "ko":
        title = "2026 ìš´ì„¸ | ë  + MBTI + ì‚¬ì£¼ + ì˜¤ëŠ˜/ë‚´ì¼ ìš´ì„¸"

    webapp_ld = {
        "@context": "https://schema.org",
        "@type": "WebApplication",
        "name": title,
        "url": APP_URL,
        "applicationCategory": "LifestyleApplication",
        "operatingSystem": "Web",
        "description": description
    }

    # FAQ (ê°„ë‹¨)
    faq_by_lang = {
        "ko": [
            ("ì´ ì•±ì€ ë¬´ì—‡ì„ ì œê³µí•˜ë‚˜ìš”?", "2026ë…„ ë ìš´ì„¸, MBTI ì„±í–¥, ì‚¬ì£¼ í•œë§ˆë””, ì˜¤ëŠ˜/ë‚´ì¼ ìš´ì„¸, íƒ€ë¡œë¥¼ ë¬´ë£Œë¡œ ì œê³µí•©ë‹ˆë‹¤."),
            ("MBTIëŠ” ìš´ì„¸ì— ì–´ë–»ê²Œ ë°˜ì˜ë˜ë‚˜ìš”?", "E/I, S/N, T/F, J/P ì„±í–¥ì„ ë°˜ì˜í•´ ì—°ì• Â·ì¬ë¬¼Â·ì¼/í•™ì—…Â·ê±´ê°• ì¡°ì–¸ì„ ì œê³µí•©ë‹ˆë‹¤."),
            ("ë¯¸ë‹ˆê²Œì„ ì´ë²¤íŠ¸ëŠ” ì–´ë–»ê²Œ ì°¸ì—¬í•˜ë‚˜ìš”?", "í•œêµ­ì–´ í™”ë©´ì—ì„œ ìŠ¤í†±ì›Œì¹˜ë¥¼ 20.160~20.169ì´ˆ êµ¬ê°„ì— ë§ì¶”ë©´ ë‹¹ì²¨ì´ë©°, ë‹¹ì²¨ ì‹œ ì •ë³´ ì…ë ¥ìœ¼ë¡œ ì‘ëª¨ë©ë‹ˆë‹¤.")
        ],
        "en": [
            ("What does this app provide?", "Free 2026 zodiac fortune, MBTI-based advice, a short saju message, today/tomorrow fortune, and a tarot draw."),
            ("How does MBTI affect the result?", "It uses E/I, S/N, T/F, J/P traits to create practical advice for love, money, work/study, and health.")
        ],
        "ja": [
            ("ã“ã®ã‚¢ãƒ—ãƒªã¯ä½•ãŒã§ãã¾ã™ã‹ï¼Ÿ", "2026å¹´ã®å¹²æ”¯é‹å‹¢ã€MBTIã€å››æŸ±ã‚³ãƒ¡ãƒ³ãƒˆã€ä»Šæ—¥/æ˜æ—¥ã®é‹å‹¢ã€ã‚¿ãƒ­ãƒƒãƒˆã‚’ç„¡æ–™ã§æä¾›ã—ã¾ã™ã€‚")
        ],
        "zh": [
            ("è¿™ä¸ªåº”ç”¨æä¾›ä»€ä¹ˆï¼Ÿ", "å…è´¹æä¾›2026ç”Ÿè‚–è¿åŠ¿ã€MBTIå»ºè®®ã€å››æŸ±çŸ­è¯„ã€ä»Šæ—¥/æ˜æ—¥è¿åŠ¿ä¸å¡”ç½—æŠ½ç‰Œã€‚")
        ],
        "ru": [
            ("Ğ§Ñ‚Ğ¾ Ğ´Ğ°ĞµÑ‚ Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ?", "Ğ‘ĞµÑĞ¿Ğ»Ğ°Ñ‚Ğ½Ğ¾: 2026 Ğ·Ğ¾Ğ´Ğ¸Ğ°Ğº, ÑĞ¾Ğ²ĞµÑ‚Ñ‹ Ğ¿Ğ¾ MBTI, ĞºĞ¾Ñ€Ğ¾Ñ‚ĞºĞ¾Ğµ ÑĞ°Ğ´Ğ¶Ñƒ-ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğµ, ÑƒĞ´Ğ°Ñ‡Ğ° ÑĞµĞ³Ğ¾Ğ´Ğ½Ñ/Ğ·Ğ°Ğ²Ñ‚Ñ€Ğ° Ğ¸ Ñ‚Ğ°Ñ€Ğ¾.")
        ],
        "hi": [
            ("à¤¯à¤¹ à¤à¤ª à¤•à¥à¤¯à¤¾ à¤¦à¥‡à¤¤à¤¾ à¤¹à¥ˆ?", "à¤®à¥à¤«à¤¼à¥à¤¤ 2026 à¤°à¤¾à¤¶à¤¿, MBTI à¤¸à¤²à¤¾à¤¹, à¤›à¥‹à¤Ÿà¤¾ à¤¸à¤¾à¤œà¥‚ à¤¸à¤‚à¤¦à¥‡à¤¶, à¤†à¤œ/à¤•à¤² à¤•à¥€ à¤•à¤¿à¤¸à¥à¤®à¤¤ à¤”à¤° à¤Ÿà¥ˆà¤°à¥‹à¥¤")
        ],
    }
    faq_list = faq_by_lang.get(lang_code, faq_by_lang["en"])
    faq_ld = {
        "@context": "https://schema.org",
        "@type": "FAQPage",
        "mainEntity": [
            {"@type": "Question", "name": q, "acceptedAnswer": {"@type": "Answer", "text": a}}
            for q, a in faq_list
        ]
    }

    st.components.v1.html(
        f"""
<script>
(function() {{
  try {{
    const description = {json.dumps(description, ensure_ascii=False)};
    const keywords = {json.dumps(keywords, ensure_ascii=False)};
    const title = {json.dumps(title, ensure_ascii=False)};
    const appUrl = {json.dumps(APP_URL, ensure_ascii=False)};

    const metas = [
      ['name','description', description],
      ['name','keywords', keywords],
      ['property','og:title', title],
      ['property','og:description', description],
      ['property','og:type','website'],
      ['property','og:url', appUrl],
      ['name','twitter:card','summary'],
      ['name','robots','index,follow']
    ];

    metas.forEach(([attr, key, val]) => {{
      let el = document.head.querySelector(`meta[${{attr}}="${{key}}"]`);
      if(!el) {{
        el = document.createElement('meta');
        el.setAttribute(attr, key);
        document.head.appendChild(el);
      }}
      el.setAttribute('content', val);
    }});

    let canonical = document.head.querySelector('link[rel="canonical"]');
    if(!canonical) {{
      canonical = document.createElement('link');
      canonical.setAttribute('rel','canonical');
      document.head.appendChild(canonical);
    }}
    canonical.setAttribute('href', appUrl);

    // JSON-LD WebApp
    const webappLd = {json.dumps(json.dumps(webapp_ld, ensure_ascii=False))};
    let s1 = document.head.querySelector('script[data-jsonld="fortune-webapp"]');
    if(!s1) {{
      s1 = document.createElement('script');
      s1.type = 'application/ld+json';
      s1.setAttribute('data-jsonld','fortune-webapp');
      document.head.appendChild(s1);
    }}
    s1.text = webappLd;

    // JSON-LD FAQ
    const faqLd = {json.dumps(json.dumps(faq_ld, ensure_ascii=False))};
    let s2 = document.head.querySelector('script[data-jsonld="fortune-faq"]');
    if(!s2) {{
      s2 = document.createElement('script');
      s2.type = 'application/ld+json';
      s2.setAttribute('data-jsonld','fortune-faq');
      document.head.appendChild(s2);
    }}
    s2.text = faqLd;

  }} catch(e) {{}}
}})();
</script>
""",
        height=0
    )

# =========================================================
# 2) Language / Text
# =========================================================
LANGS = [
    ("ko", "í•œêµ­ì–´"),
    ("en", "English"),
    ("ja", "æ—¥æœ¬èª"),
    ("zh", "ä¸­æ–‡"),
    ("ru", "Ğ ÑƒÑÑĞºĞ¸Ğ¹"),
    ("hi", "à¤¹à¤¿à¤¨à¥à¤¦à¥€"),
]

T = {
    "ko": {
        "lang_pick": "ì–¸ì–´ ì„ íƒ",
        "title": "2026 ë  + MBTI + ì‚¬ì£¼ + ì˜¤ëŠ˜/ë‚´ì¼ ìš´ì„¸",
        "subtitle": "ì™„ì „ ë¬´ë£Œ",
        "name": "ì´ë¦„ ì…ë ¥ (ê²°ê³¼ì— í‘œì‹œë¼ìš”)",
        "birth": "ìƒë…„ì›”ì¼ ì…ë ¥",
        "year": "ë…„", "month": "ì›”", "day": "ì¼",
        "mbti_mode": "MBTIë¥¼ ì–´ë–»ê²Œ í• ê¹Œìš”?",
        "mbti_direct": "ì§ì ‘ ì„ íƒ",
        "mbti_12": "ê°„ë‹¨ í…ŒìŠ¤íŠ¸ (12ë¬¸í•­)",
        "mbti_16": "ìƒì„¸ í…ŒìŠ¤íŠ¸ (16ë¬¸í•­)",
        "go_result": "2026ë…„ ìš´ì„¸ ë³´ê¸°!",
        "reset": "ì²˜ìŒë¶€í„° ë‹¤ì‹œí•˜ê¸°",
        "share_btn": "ì¹œêµ¬ì—ê²Œ ê²°ê³¼ ê³µìœ í•˜ê¸°(ì´ë¯¸ì§€ ì €ì¥)",
        "share_hint": "ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ â€˜ê³µìœ ìš© ì´ë¯¸ì§€â€™ê°€ ìƒì„±ë©ë‹ˆë‹¤ â†’ ì €ì¥(ë‹¤ìš´ë¡œë“œ/ìƒˆíƒ­ì—´ê¸°/ìŠ¤í¬ë¦°ìƒ·) í›„ ê°¤ëŸ¬ë¦¬ì—ì„œ ê³µìœ í•˜ì„¸ìš”.",
        "tarot_btn": "ì˜¤ëŠ˜ì˜ íƒ€ë¡œ ì¹´ë“œ ë½‘ê¸°",
        "tarot_title": "ì˜¤ëŠ˜ì˜ íƒ€ë¡œ ì¹´ë“œ",
        "best_combo": "ìµœê³  ì¡°í•©!",
        "sections": {
            "zodiac": "ë  ìš´ì„¸",
            "mbti": "MBTI íŠ¹ì§•",
            "saju": "ì‚¬ì£¼ í•œ ë§ˆë””",
            "today": "ì˜¤ëŠ˜ ìš´ì„¸",
            "tomorrow": "ë‚´ì¼ ìš´ì„¸",
            "year_all": "2026 ì „ì²´ ìš´ì„¸",
            "love": "ì—°ì• ìš´",
            "money": "ì¬ë¬¼ìš´",
            "work": "ì¼/í•™ì—…ìš´",
            "health": "ê±´ê°•ìš´",
            "point": "í–‰ìš´ í¬ì¸íŠ¸",
            "advice": "ì¡°í•© ì¡°ì–¸",
        },
        "ad_placeholder": "AD (ì‹¬ì‚¬ í†µê³¼ í›„ ì´ ìœ„ì¹˜ì— ê´‘ê³ ê°€ í‘œì‹œë©ë‹ˆë‹¤)",
        "ad_kr_title": "ì •ìˆ˜ê¸°ë Œíƒˆ ëŒ€ë°•!",
        "ad_kr_body1": "ì œíœ´ì¹´ë“œë©´ ì›” 0ì›ë¶€í„°!",
        "ad_kr_body2": "ì„¤ì¹˜ ë‹¹ì¼ ìµœëŒ€ 50ë§Œì› ì§€ì› + ì‚¬ì€í’ˆ ë“¬ë¿",
        "ad_kr_link": "ë‹¤ë‚˜ëˆ”ë Œíƒˆ.com ë°”ë¡œê°€ê¸°",
        "ad_kr_url": "https://www.ë‹¤ë‚˜ëˆ”ë Œíƒˆ.com",
        "mini_title": "ğŸ ë¯¸ë‹ˆê²Œì„: ì„ ì°©ìˆœ 20ëª… ì»¤í”¼ì¿ í° ë„ì „!",
        "mini_desc": "ìŠ¤í†±ì›Œì¹˜ë¥¼ **20.16ì´ˆ**ì— ë§ì¶”ë©´ ë‹¹ì²¨!\n\n- ê¸°ë³¸ 1íšŒ\n- **ê³µìœ  ë²„íŠ¼** ëˆ„ë¥´ë©´ 1íšŒ ì¶”ê°€\n- ëª©í‘œ êµ¬ê°„: **20.160 ~ 20.169ì´ˆ**",
        "mini_try_left": "ë‚¨ì€ ì‹œë„",
        "mini_closed": "ì´ë²¤íŠ¸ê°€ ì¢…ë£Œë˜ì—ˆìŠµë‹ˆë‹¤. (ì„ ì°©ìˆœ 20ëª… ë§ˆê°)",
        "mini_dup": "ì´ë¯¸ ì°¸ì—¬í•œ ë²ˆí˜¸ì…ë‹ˆë‹¤. (ì¤‘ë³µ ì°¸ì—¬ ë¶ˆê°€)",
        "win_title": "ğŸ‰ ë‹¹ì²¨! ì •ë³´ ì…ë ¥",
        "win_name": "ì´ë¦„",
        "win_phone": "ì „í™”ë²ˆí˜¸",
        "win_consent": "ê°œì¸ì •ë³´ ìˆ˜ì§‘Â·ì´ìš© ë™ì˜(í•„ìˆ˜)",
        "win_consent_text": "ì´ë²¤íŠ¸ ê²½í’ˆ ë°œì†¡ì„ ìœ„í•´ ì´ë¦„/ì „í™”ë²ˆí˜¸ë¥¼ ìˆ˜ì§‘í•˜ë©°, ëª©ì  ë‹¬ì„± í›„ ì§€ì²´ ì—†ì´ íŒŒê¸°í•©ë‹ˆë‹¤. ë™ì˜ ê±°ë¶€ ì‹œ ì°¸ì—¬ê°€ ì œí•œë©ë‹ˆë‹¤.",
        "win_submit": "ì œì¶œ",
        "win_thanks": "ì ‘ìˆ˜ ì™„ë£Œ! ì»¤í”¼ì¿ í° ë°œì†¡ ëŒ€ìƒì— ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤.",
        "sheet_fail": "êµ¬ê¸€ì‹œíŠ¸ ì—°ê²°ì´ ì•„ì§ ì•ˆ ë˜ì–´ ìˆì–´ìš”. (Secrets/requirements/ì‹œíŠ¸ ê³µìœ /íƒ­ ì´ë¦„ í™•ì¸ í•„ìš”)",
        "sheet_ok": "êµ¬ê¸€ì‹œíŠ¸ ì—°ê²° ì™„ë£Œ",
        "mbti_submit": "ì œì¶œí•˜ë©´ ë°”ë¡œ ê²°ê³¼ë¡œ ë„˜ì–´ê°‘ë‹ˆë‹¤.",
        "faq_title": "ğŸ” ê²€ìƒ‰/AI ë…¸ì¶œìš© ì •ë³´(FAQ)",
        "share_image_title": "ê³µìœ ìš© ê²°ê³¼ ì´ë¯¸ì§€",
        "download_image": "ê³µìœ  ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œ(PNG)",
        "open_image": "ìƒˆ íƒ­ì—ì„œ ì´ë¯¸ì§€ ì—´ê¸°(ì €ì¥ í›„ ê°¤ëŸ¬ë¦¬ ê³µìœ )",
    },
    # ë‹¤ë¥¸ ì–¸ì–´ë“¤ë„ â€˜ì˜ì–´ë¡œë§Œâ€™ ë‚˜ì˜¤ì§€ ì•Šê²Œ ëª¨ë‘ ë²ˆì—­ëœ ê²°ê³¼ ë¬¸êµ¬/ë¼ë²¨ ì‚¬ìš©
    "en": {
        "lang_pick": "Language",
        "title": "2026 Zodiac + MBTI + Saju + Today/Tomorrow",
        "subtitle": "Completely Free",
        "name": "Name (shown in result)",
        "birth": "Birth date",
        "year": "Year", "month": "Month", "day": "Day",
        "mbti_mode": "How do you want to set MBTI?",
        "mbti_direct": "Pick directly",
        "mbti_12": "Quick test (12)",
        "mbti_16": "Full test (16)",
        "go_result": "See 2026 Fortune!",
        "reset": "Start over",
        "share_btn": "Create share image",
        "share_hint": "A share image will be generated â†’ save/download/open in new tab â†’ share from your gallery.",
        "tarot_btn": "Draw today's tarot",
        "tarot_title": "Today's Tarot",
        "best_combo": "Best combo!",
        "sections": {
            "zodiac": "Zodiac",
            "mbti": "MBTI",
            "saju": "Saju",
            "today": "Today",
            "tomorrow": "Tomorrow",
            "year_all": "2026 Overall",
            "love": "Love",
            "money": "Money",
            "work": "Work/Study",
            "health": "Health",
            "point": "Lucky point",
            "advice": "Combo advice",
        },
        "ad_placeholder": "AD (Ads will appear here after approval)",
        "mini_title": "",
        "mini_desc": "",
        "mini_try_left": "",
        "mini_closed": "",
        "mini_dup": "",
        "win_title": "",
        "win_name": "",
        "win_phone": "",
        "win_consent": "",
        "win_consent_text": "",
        "win_submit": "",
        "win_thanks": "",
        "sheet_fail": "",
        "sheet_ok": "",
        "mbti_submit": "Submit to see result.",
        "faq_title": "FAQ (for better search visibility)",
        "share_image_title": "Share Image",
        "download_image": "Download share image (PNG)",
        "open_image": "Open image in new tab",
    },
    "ja": {
        "lang_pick": "è¨€èª",
        "title": "2026å¹´ å¹²æ”¯ + MBTI + å››æŸ± + ä»Šæ—¥/æ˜æ—¥",
        "subtitle": "å®Œå…¨ç„¡æ–™",
        "name": "åå‰ï¼ˆçµæœã«è¡¨ç¤ºï¼‰",
        "birth": "ç”Ÿå¹´æœˆæ—¥",
        "year": "å¹´", "month": "æœˆ", "day": "æ—¥",
        "mbti_mode": "MBTIã®è¨­å®šæ–¹æ³•",
        "mbti_direct": "ç›´æ¥é¸æŠ",
        "mbti_12": "ç°¡æ˜“ãƒ†ã‚¹ãƒˆï¼ˆ12ï¼‰",
        "mbti_16": "è©³ç´°ãƒ†ã‚¹ãƒˆï¼ˆ16ï¼‰",
        "go_result": "çµæœã‚’è¦‹ã‚‹",
        "reset": "æœ€åˆã‹ã‚‰",
        "share_btn": "å…±æœ‰ç”»åƒã‚’ä½œæˆ",
        "share_hint": "å…±æœ‰ç”»åƒã‚’ç”Ÿæˆ â†’ ä¿å­˜/ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ â†’ ã‚®ãƒ£ãƒ©ãƒªãƒ¼ã‹ã‚‰å…±æœ‰ã€‚",
        "tarot_btn": "ä»Šæ—¥ã®ã‚¿ãƒ­ãƒƒãƒˆ",
        "tarot_title": "ä»Šæ—¥ã®ã‚¿ãƒ­ãƒƒãƒˆ",
        "best_combo": "æœ€é«˜ã®çµ„ã¿åˆã‚ã›ï¼",
        "sections": {
            "zodiac": "å¹²æ”¯é‹å‹¢",
            "mbti": "MBTIç‰¹å¾´",
            "saju": "å››æŸ±ã‚³ãƒ¡ãƒ³ãƒˆ",
            "today": "ä»Šæ—¥",
            "tomorrow": "æ˜æ—¥",
            "year_all": "2026å¹´ç·åˆ",
            "love": "æ‹æ„›",
            "money": "é‡‘é‹",
            "work": "ä»•äº‹/å­¦æ¥­",
            "health": "å¥åº·",
            "point": "ãƒ©ãƒƒã‚­ãƒ¼ãƒã‚¤ãƒ³ãƒˆ",
            "advice": "ã‚¢ãƒ‰ãƒã‚¤ã‚¹",
        },
        "ad_placeholder": "ADï¼ˆå¯©æŸ»é€šéå¾Œã“ã“ã«è¡¨ç¤ºï¼‰",
        "mini_title": "",
        "mini_desc": "",
        "mini_try_left": "",
        "mini_closed": "",
        "mini_dup": "",
        "win_title": "",
        "win_name": "",
        "win_phone": "",
        "win_consent": "",
        "win_consent_text": "",
        "win_submit": "",
        "win_thanks": "",
        "sheet_fail": "",
        "sheet_ok": "",
        "mbti_submit": "é€ä¿¡ã™ã‚‹ã¨çµæœã¸ã€‚",
        "faq_title": "FAQï¼ˆæ¤œç´¢è¡¨ç¤ºã®å¼·åŒ–ï¼‰",
        "share_image_title": "å…±æœ‰ç”¨ç”»åƒ",
        "download_image": "å…±æœ‰ç”»åƒã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ï¼ˆPNGï¼‰",
        "open_image": "æ–°ã—ã„ã‚¿ãƒ–ã§ç”»åƒã‚’é–‹ã",
    },
    "zh": {
        "lang_pick": "è¯­è¨€",
        "title": "2026 ç”Ÿè‚– + MBTI + å››æŸ± + ä»Šæ—¥/æ˜æ—¥",
        "subtitle": "å®Œå…¨å…è´¹",
        "name": "å§“åï¼ˆç»“æœæ˜¾ç¤ºï¼‰",
        "birth": "å‡ºç”Ÿæ—¥æœŸ",
        "year": "å¹´", "month": "æœˆ", "day": "æ—¥",
        "mbti_mode": "MBTI è®¾ç½®æ–¹å¼",
        "mbti_direct": "ç›´æ¥é€‰æ‹©",
        "mbti_12": "å¿«é€Ÿæµ‹è¯•ï¼ˆ12ï¼‰",
        "mbti_16": "è¯¦ç»†æµ‹è¯•ï¼ˆ16ï¼‰",
        "go_result": "æŸ¥çœ‹ç»“æœ",
        "reset": "é‡æ–°å¼€å§‹",
        "share_btn": "ç”Ÿæˆåˆ†äº«å›¾ç‰‡",
        "share_hint": "å°†ç”Ÿæˆåˆ†äº«å›¾ç‰‡ â†’ ä¿å­˜/ä¸‹è½½ â†’ åœ¨ç›¸å†Œä¸­åˆ†äº«ã€‚",
        "tarot_btn": "æŠ½ä»Šæ—¥å¡”ç½—",
        "tarot_title": "ä»Šæ—¥å¡”ç½—",
        "best_combo": "æœ€ä½³ç»„åˆï¼",
        "sections": {
            "zodiac": "ç”Ÿè‚–è¿åŠ¿",
            "mbti": "MBTI ç‰¹ç‚¹",
            "saju": "å››æŸ±çŸ­è¯„",
            "today": "ä»Šå¤©",
            "tomorrow": "æ˜å¤©",
            "year_all": "2026 æ€»è¿",
            "love": "æ‹çˆ±",
            "money": "è´¢è¿",
            "work": "å·¥ä½œ/å­¦ä¹ ",
            "health": "å¥åº·",
            "point": "å¹¸è¿ç‚¹",
            "advice": "ç»„åˆå»ºè®®",
        },
        "ad_placeholder": "ADï¼ˆå®¡æ ¸é€šè¿‡åæ˜¾ç¤ºï¼‰",
        "mini_title": "",
        "mini_desc": "",
        "mini_try_left": "",
        "mini_closed": "",
        "mini_dup": "",
        "win_title": "",
        "win_name": "",
        "win_phone": "",
        "win_consent": "",
        "win_consent_text": "",
        "win_submit": "",
        "win_thanks": "",
        "sheet_fail": "",
        "sheet_ok": "",
        "mbti_submit": "æäº¤åæŸ¥çœ‹ç»“æœã€‚",
        "faq_title": "å¸¸è§é—®é¢˜ï¼ˆæå‡æœç´¢å¯è§æ€§ï¼‰",
        "share_image_title": "åˆ†äº«å›¾ç‰‡",
        "download_image": "ä¸‹è½½åˆ†äº«å›¾ç‰‡ï¼ˆPNGï¼‰",
        "open_image": "æ–°æ ‡ç­¾é¡µæ‰“å¼€å›¾ç‰‡",
    },
    "ru": {
        "lang_pick": "Ğ¯Ğ·Ñ‹Ğº",
        "title": "2026: Ğ—Ğ¾Ğ´Ğ¸Ğ°Ğº + MBTI + Ğ¡Ğ°Ğ´Ğ¶Ñƒ + Ğ¡ĞµĞ³Ğ¾Ğ´Ğ½Ñ/Ğ—Ğ°Ğ²Ñ‚Ñ€Ğ°",
        "subtitle": "ĞŸĞ¾Ğ»Ğ½Ğ¾ÑÑ‚ÑŒÑ Ğ±ĞµÑĞ¿Ğ»Ğ°Ñ‚Ğ½Ğ¾",
        "name": "Ğ˜Ğ¼Ñ (Ğ² Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ğµ)",
        "birth": "Ğ”Ğ°Ñ‚Ğ° Ñ€Ğ¾Ğ¶Ğ´ĞµĞ½Ğ¸Ñ",
        "year": "Ğ“Ğ¾Ğ´", "month": "ĞœĞµÑÑÑ†", "day": "Ğ”ĞµĞ½ÑŒ",
        "mbti_mode": "ĞšĞ°Ğº ÑƒĞºĞ°Ğ·Ğ°Ñ‚ÑŒ MBTI?",
        "mbti_direct": "Ğ’Ñ‹Ğ±Ñ€Ğ°Ñ‚ÑŒ",
        "mbti_12": "Ğ‘Ñ‹ÑÑ‚Ñ€Ñ‹Ğ¹ Ñ‚ĞµÑÑ‚ (12)",
        "mbti_16": "ĞŸĞ¾Ğ»Ğ½Ñ‹Ğ¹ Ñ‚ĞµÑÑ‚ (16)",
        "go_result": "ĞŸĞ¾ĞºĞ°Ğ·Ğ°Ñ‚ÑŒ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚",
        "reset": "Ğ¡Ğ½Ğ°Ñ‡Ğ°Ğ»Ğ°",
        "share_btn": "Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Ğ¸Ğ·Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğµ Ğ´Ğ»Ñ ÑˆĞ°Ñ€Ğ¸Ğ½Ğ³Ğ°",
        "share_hint": "Ğ‘ÑƒĞ´ĞµÑ‚ ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ğ¾ Ğ¸Ğ·Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğµ â†’ ÑĞ¾Ñ…Ñ€Ğ°Ğ½Ğ¸Ñ‚Ğµ/ÑĞºĞ°Ñ‡Ğ°Ğ¹Ñ‚Ğµ â†’ Ğ¿Ğ¾Ğ´ĞµĞ»Ğ¸Ñ‚ĞµÑÑŒ Ğ¸Ğ· Ğ³Ğ°Ğ»ĞµÑ€ĞµĞ¸.",
        "tarot_btn": "Ğ¢Ğ°Ñ€Ğ¾ Ğ´Ğ½Ñ",
        "tarot_title": "Ğ¢Ğ°Ñ€Ğ¾ Ğ´Ğ½Ñ",
        "best_combo": "Ğ›ÑƒÑ‡ÑˆĞ°Ñ ĞºĞ¾Ğ¼Ğ±Ğ¸Ğ½Ğ°Ñ†Ğ¸Ñ!",
        "sections": {
            "zodiac": "Ğ—Ğ¾Ğ´Ğ¸Ğ°Ğº",
            "mbti": "MBTI",
            "saju": "Ğ¡Ğ°Ğ´Ğ¶Ñƒ",
            "today": "Ğ¡ĞµĞ³Ğ¾Ğ´Ğ½Ñ",
            "tomorrow": "Ğ—Ğ°Ğ²Ñ‚Ñ€Ğ°",
            "year_all": "Ğ˜Ñ‚Ğ¾Ğ³ 2026",
            "love": "Ğ›ÑĞ±Ğ¾Ğ²ÑŒ",
            "money": "Ğ”ĞµĞ½ÑŒĞ³Ğ¸",
            "work": "Ğ Ğ°Ğ±Ğ¾Ñ‚Ğ°/Ğ£Ñ‡Ñ‘Ğ±Ğ°",
            "health": "Ğ—Ğ´Ğ¾Ñ€Ğ¾Ğ²ÑŒĞµ",
            "point": "Ğ£Ğ´Ğ°Ñ‡Ğ½Ñ‹Ğ¹ Ğ¿ÑƒĞ½ĞºÑ‚",
            "advice": "Ğ¡Ğ¾Ğ²ĞµÑ‚",
        },
        "ad_placeholder": "AD (Ğ¿Ğ¾ÑĞ»Ğµ Ğ¾Ğ´Ğ¾Ğ±Ñ€ĞµĞ½Ğ¸Ñ)",
        "mini_title": "",
        "mini_desc": "",
        "mini_try_left": "",
        "mini_closed": "",
        "mini_dup": "",
        "win_title": "",
        "win_name": "",
        "win_phone": "",
        "win_consent": "",
        "win_consent_text": "",
        "win_submit": "",
        "win_thanks": "",
        "sheet_fail": "",
        "sheet_ok": "",
        "mbti_submit": "ĞÑ‚Ğ¿Ñ€Ğ°Ğ²ÑŒÑ‚Ğµ, Ñ‡Ñ‚Ğ¾Ğ±Ñ‹ ÑƒĞ²Ğ¸Ğ´ĞµÑ‚ÑŒ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚.",
        "faq_title": "FAQ (ÑƒĞ»ÑƒÑ‡ÑˆĞµĞ½Ğ¸Ğµ Ğ²Ğ¸Ğ´Ğ¸Ğ¼Ğ¾ÑÑ‚Ğ¸ Ğ² Ğ¿Ğ¾Ğ¸ÑĞºĞµ)",
        "share_image_title": "Ğ˜Ğ·Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğµ Ğ´Ğ»Ñ ÑˆĞ°Ñ€Ğ¸Ğ½Ğ³Ğ°",
        "download_image": "Ğ¡ĞºĞ°Ñ‡Ğ°Ñ‚ÑŒ Ğ¸Ğ·Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğµ (PNG)",
        "open_image": "ĞÑ‚ĞºÑ€Ñ‹Ñ‚ÑŒ Ğ¸Ğ·Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğµ Ğ² Ğ½Ğ¾Ğ²Ğ¾Ğ¹ Ğ²ĞºĞ»Ğ°Ğ´ĞºĞµ",
    },
    "hi": {
        "lang_pick": "à¤­à¤¾à¤·à¤¾",
        "title": "2026 à¤°à¤¾à¤¶à¤¿ + MBTI + à¤¸à¤¾à¤œà¥‚ + à¤†à¤œ/à¤•à¤²",
        "subtitle": "à¤ªà¥‚à¤°à¥€ à¤¤à¤°à¤¹ à¤®à¥à¤«à¤¼à¥à¤¤",
        "name": "à¤¨à¤¾à¤® (à¤ªà¤°à¤¿à¤£à¤¾à¤® à¤®à¥‡à¤‚ à¤¦à¤¿à¤–à¥‡à¤—à¤¾)",
        "birth": "à¤œà¤¨à¥à¤®à¤¤à¤¿à¤¥à¤¿",
        "year": "à¤µà¤°à¥à¤·", "month": "à¤®à¤¹à¥€à¤¨à¤¾", "day": "à¤¦à¤¿à¤¨",
        "mbti_mode": "MBTI à¤•à¥ˆà¤¸à¥‡ à¤¸à¥‡à¤Ÿ à¤•à¤°à¥‡à¤‚?",
        "mbti_direct": "à¤¸à¥€à¤§à¥‡ à¤šà¥à¤¨à¥‡à¤‚",
        "mbti_12": "à¤•à¥à¤µà¤¿à¤• à¤Ÿà¥‡à¤¸à¥à¤Ÿ (12)",
        "mbti_16": "à¤«à¥à¤² à¤Ÿà¥‡à¤¸à¥à¤Ÿ (16)",
        "go_result": "à¤ªà¤°à¤¿à¤£à¤¾à¤® à¤¦à¥‡à¤–à¥‡à¤‚",
        "reset": "à¤«à¤¿à¤° à¤¸à¥‡ à¤¶à¥à¤°à¥‚",
        "share_btn": "à¤¶à¥‡à¤¯à¤° à¤‡à¤®à¥‡à¤œ à¤¬à¤¨à¤¾à¤à¤‚",
        "share_hint": "à¤¶à¥‡à¤¯à¤° à¤‡à¤®à¥‡à¤œ à¤¬à¤¨à¥‡à¤—à¥€ â†’ à¤¸à¥‡à¤µ/à¤¡à¤¾à¤‰à¤¨à¤²à¥‹à¤¡ à¤•à¤°à¥‡à¤‚ â†’ à¤—à¥ˆà¤²à¤°à¥€ à¤¸à¥‡ à¤¶à¥‡à¤¯à¤° à¤•à¤°à¥‡à¤‚à¥¤",
        "tarot_btn": "à¤†à¤œ à¤•à¤¾ à¤Ÿà¥ˆà¤°à¥‹",
        "tarot_title": "à¤†à¤œ à¤•à¤¾ à¤Ÿà¥ˆà¤°à¥‹",
        "best_combo": "à¤¬à¥‡à¤¸à¥à¤Ÿ à¤•à¥‰à¤®à¥à¤¬à¥‹!",
        "sections": {
            "zodiac": "à¤°à¤¾à¤¶à¤¿",
            "mbti": "MBTI",
            "saju": "à¤¸à¤¾à¤œà¥‚",
            "today": "à¤†à¤œ",
            "tomorrow": "à¤•à¤²",
            "year_all": "2026 à¤¸à¤®à¤—à¥à¤°",
            "love": "à¤ªà¥à¤¯à¤¾à¤°",
            "money": "à¤§à¤¨",
            "work": "à¤•à¤¾à¤®/à¤ªà¤¢à¤¼à¤¾à¤ˆ",
            "health": "à¤¸à¥à¤µà¤¾à¤¸à¥à¤¥à¥à¤¯",
            "point": "à¤²à¤•à¥€ à¤ªà¥‰à¤‡à¤‚à¤Ÿ",
            "advice": "à¤¸à¤²à¤¾à¤¹",
        },
        "ad_placeholder": "AD (à¤®à¤‚à¤œà¤¼à¥‚à¤°à¥€ à¤•à¥‡ à¤¬à¤¾à¤¦)",
        "mini_title": "",
        "mini_desc": "",
        "mini_try_left": "",
        "mini_closed": "",
        "mini_dup": "",
        "win_title": "",
        "win_name": "",
        "win_phone": "",
        "win_consent": "",
        "win_consent_text": "",
        "win_submit": "",
        "win_thanks": "",
        "sheet_fail": "",
        "sheet_ok": "",
        "mbti_submit": "à¤¸à¤¬à¤®à¤¿à¤Ÿ à¤•à¤°à¤•à¥‡ à¤ªà¤°à¤¿à¤£à¤¾à¤® à¤¦à¥‡à¤–à¥‡à¤‚à¥¤",
        "faq_title": "FAQ (à¤¬à¥‡à¤¹à¤¤à¤° à¤–à¥‹à¤œ à¤¦à¥ƒà¤¶à¥à¤¯à¤¤à¤¾)",
        "share_image_title": "à¤¶à¥‡à¤¯à¤° à¤‡à¤®à¥‡à¤œ",
        "download_image": "à¤¶à¥‡à¤¯à¤° à¤‡à¤®à¥‡à¤œ à¤¡à¤¾à¤‰à¤¨à¤²à¥‹à¤¡ (PNG)",
        "open_image": "à¤¨à¤ˆ à¤Ÿà¥ˆà¤¬ à¤®à¥‡à¤‚ à¤‡à¤®à¥‡à¤œ à¤–à¥‹à¤²à¥‡à¤‚",
    }
}

# =========================================================
# 3) Content (6 languages)
# =========================================================
TAROT = {
    "The Sun": {
        "ko": "íƒœì–‘ - í–‰ë³µ, ì„±ê³µ, ê¸ì • ì—ë„ˆì§€",
        "en": "Happiness, success, positive energy",
        "ja": "å¹¸ç¦ãƒ»æˆåŠŸãƒ»å‰å‘ããªã‚¨ãƒãƒ«ã‚®ãƒ¼",
        "zh": "å¹¸ç¦ã€æˆåŠŸã€ç§¯æèƒ½é‡",
        "ru": "Ğ¡Ñ‡Ğ°ÑÑ‚ÑŒĞµ, ÑƒÑĞ¿ĞµÑ…, Ğ¿Ğ¾Ğ·Ğ¸Ñ‚Ğ¸Ğ²",
        "hi": "à¤–à¥à¤¶à¥€, à¤¸à¤«à¤²à¤¤à¤¾, à¤¸à¤•à¤¾à¤°à¤¾à¤¤à¥à¤®à¤• à¤Šà¤°à¥à¤œà¤¾",
    },
    "Wheel of Fortune": {
        "ko": "ìš´ëª…ì˜ ìˆ˜ë ˆë°”í€´ - ë³€í™”, ì „í™˜ì ",
        "en": "Change, turning point",
        "ja": "å¤‰åŒ–ãƒ»è»¢æ©Ÿ",
        "zh": "å˜åŒ–ã€è½¬æœº",
        "ru": "ĞŸĞµÑ€ĞµĞ¼ĞµĞ½Ñ‹, Ğ¿Ğ¾Ğ²Ğ¾Ñ€Ğ¾Ñ‚",
        "hi": "à¤¬à¤¦à¤²à¤¾à¤µ, à¤Ÿà¤°à¥à¤¨à¤¿à¤‚à¤— à¤ªà¥‰à¤‡à¤‚à¤Ÿ",
    },
    "Strength": {
        "ko": "í˜ - ìš©ê¸°, ì¸ë‚´",
        "en": "Courage, patience",
        "ja": "å‹‡æ°—ãƒ»å¿è€",
        "zh": "å‹‡æ°”ã€è€å¿ƒ",
        "ru": "Ğ¡Ğ¼ĞµĞ»Ğ¾ÑÑ‚ÑŒ, Ñ‚ĞµÑ€Ğ¿ĞµĞ½Ğ¸Ğµ",
        "hi": "à¤¸à¤¾à¤¹à¤¸, à¤§à¥ˆà¤°à¥à¤¯",
    },
    "The World": {
        "ko": "ì„¸ê³„ - ì™„ì„±, ì„±ì·¨",
        "en": "Completion, achievement",
        "ja": "å®Œæˆãƒ»é”æˆ",
        "zh": "å®Œæˆã€æˆå°±",
        "ru": "Ğ—Ğ°Ğ²ĞµÑ€ÑˆĞµĞ½Ğ¸Ğµ, Ğ´Ğ¾ÑÑ‚Ğ¸Ğ¶ĞµĞ½Ğ¸Ğµ",
        "hi": "à¤ªà¥‚à¤°à¥à¤£à¤¤à¤¾, à¤‰à¤ªà¤²à¤¬à¥à¤§à¤¿",
    },
}

ZODIAC_ORDER = ["rat", "ox", "tiger", "rabbit", "dragon", "snake", "horse", "goat", "monkey", "rooster", "dog", "pig"]
ZODIAC_LABEL = {
    "rat":     {"ko": "ì¥ë ", "en": "Rat", "ja": "é¼ ", "zh": "é¼ ", "ru": "ĞšÑ€Ñ‹ÑĞ°", "hi": "à¤šà¥‚à¤¹à¤¾"},
    "ox":      {"ko": "ì†Œë ", "en": "Ox", "ja": "ç‰›", "zh": "ç‰›", "ru": "Ğ‘Ñ‹Ğº", "hi": "à¤¬à¥ˆà¤²"},
    "tiger":   {"ko": "í˜¸ë‘ì´ë ", "en": "Tiger", "ja": "è™", "zh": "è™", "ru": "Ğ¢Ğ¸Ğ³Ñ€", "hi": "à¤¬à¤¾à¤˜"},
    "rabbit":  {"ko": "í† ë¼ë ", "en": "Rabbit", "ja": "å…", "zh": "å…”", "ru": "ĞšÑ€Ğ¾Ğ»Ğ¸Ğº", "hi": "à¤–à¤°à¤—à¥‹à¤¶"},
    "dragon":  {"ko": "ìš©ë ", "en": "Dragon", "ja": "é¾", "zh": "é¾™", "ru": "Ğ”Ñ€Ğ°ĞºĞ¾Ğ½", "hi": "à¤¡à¥à¤°à¥ˆà¤—à¤¨"},
    "snake":   {"ko": "ë±€ë ", "en": "Snake", "ja": "è›‡", "zh": "è›‡", "ru": "Ğ—Ğ¼ĞµÑ", "hi": "à¤¸à¤¾à¤à¤ª"},
    "horse":   {"ko": "ë§ë ", "en": "Horse", "ja": "é¦¬", "zh": "é©¬", "ru": "Ğ›Ğ¾ÑˆĞ°Ğ´ÑŒ", "hi": "à¤˜à¥‹à¤¡à¤¼à¤¾"},
    "goat":    {"ko": "ì–‘ë ", "en": "Goat", "ja": "ç¾Š", "zh": "ç¾Š", "ru": "ĞšĞ¾Ğ·Ğ°", "hi": "à¤¬à¤•à¤°à¥€"},
    "monkey":  {"ko": "ì›ìˆ­ì´ë ", "en": "Monkey", "ja": "çŒ¿", "zh": "çŒ´", "ru": "ĞĞ±ĞµĞ·ÑŒÑĞ½Ğ°", "hi": "à¤¬à¤‚à¤¦à¤°"},
    "rooster": {"ko": "ë‹­ë ", "en": "Rooster", "ja": "é¶", "zh": "é¸¡", "ru": "ĞŸĞµÑ‚ÑƒÑ…", "hi": "à¤®à¥à¤°à¥à¤—à¤¾"},
    "dog":     {"ko": "ê°œë ", "en": "Dog", "ja": "çŠ¬", "zh": "ç‹—", "ru": "Ğ¡Ğ¾Ğ±Ğ°ĞºĞ°", "hi": "à¤•à¥à¤¤à¥à¤¤à¤¾"},
    "pig":     {"ko": "ë¼ì§€ë ", "en": "Pig", "ja": "çŒª", "zh": "çŒª", "ru": "Ğ¡Ğ²Ğ¸Ğ½ÑŒÑ", "hi": "à¤¸à¥‚à¤…à¤°"},
}

ZODIAC_TEXT = {
    "rat": {
        "ko": "ë¯¼ì²©í•œ íŒë‹¨ìœ¼ë¡œ ê¸°íšŒë¥¼ ì¡ëŠ” í•´.",
        "en": "A year to seize chances with quick judgment.",
        "ja": "ç´ æ—©ã„åˆ¤æ–­ã§ãƒãƒ£ãƒ³ã‚¹ã‚’æ´ã‚€å¹´ã€‚",
        "zh": "ä»¥æ•æ·åˆ¤æ–­æŠ“ä½æœºä¼šçš„ä¸€å¹´ã€‚",
        "ru": "Ğ“Ğ¾Ğ´, ĞºĞ¾Ğ³Ğ´Ğ° Ğ±Ñ‹ÑÑ‚Ñ€Ñ‹Ğµ Ñ€ĞµÑˆĞµĞ½Ğ¸Ñ Ğ´Ğ°ÑÑ‚ ÑˆĞ°Ğ½Ñ.",
        "hi": "à¤¤à¥‡à¤œà¤¼ à¤¨à¤¿à¤°à¥à¤£à¤¯ à¤¸à¥‡ à¤…à¤µà¤¸à¤° à¤ªà¤•à¤¡à¤¼à¤¨à¥‡ à¤•à¤¾ à¤¸à¤¾à¤²à¥¤",
    },
    "ox": {
        "ko": "ê¾¸ì¤€í•¨ì˜ ê²°ì‹¤. ì•ˆì •ì  ì„±ì¥.",
        "en": "Steady effort pays off; stable growth.",
        "ja": "ç¶™ç¶šã®å®Ÿã‚Šã€‚å®‰å®šæˆé•·ã€‚",
        "zh": "åšæŒæœ‰å›æŠ¥ï¼Œç¨³æ­¥æˆé•¿ã€‚",
        "ru": "ĞŸĞ»Ğ¾Ğ´ ÑƒĞ¿Ğ¾Ñ€ÑÑ‚Ğ²Ğ°. Ğ¡Ñ‚Ğ°Ğ±Ğ¸Ğ»ÑŒĞ½Ñ‹Ğ¹ Ñ€Ğ¾ÑÑ‚.",
        "hi": "à¤²à¤—à¤¾à¤¤à¤¾à¤° à¤®à¥‡à¤¹à¤¨à¤¤ à¤•à¤¾ à¤«à¤², à¤¸à¥à¤¥à¤¿à¤° à¤ªà¥à¤°à¤—à¤¤à¤¿à¥¤",
    },
    "tiger": {
        "ko": "ë„ì „ê³¼ ì„±ê³¼. ë¦¬ë”ì‹­ì´ ë¹›ë‚¨.",
        "en": "Challenges bring results; leadership shines.",
        "ja": "æŒ‘æˆ¦ã¨æˆæœã€‚ãƒªãƒ¼ãƒ€ãƒ¼ã‚·ãƒƒãƒ—ãŒå…‰ã‚‹ã€‚",
        "zh": "æŒ‘æˆ˜å¸¦æ¥æˆæœï¼Œé¢†å¯¼åŠ›é—ªè€€ã€‚",
        "ru": "Ğ’Ñ‹Ğ·Ğ¾Ğ²Ñ‹ Ğ´Ğ°ÑÑ‚ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚. Ğ›Ğ¸Ğ´ĞµÑ€ÑÑ‚Ğ²Ğ¾ ÑÑ€ĞºĞ¾.",
        "hi": "à¤šà¥à¤¨à¥Œà¤¤à¥€ à¤¸à¥‡ à¤ªà¤°à¤¿à¤£à¤¾à¤®, à¤¨à¥‡à¤¤à¥ƒà¤¤à¥à¤µ à¤šà¤®à¤•à¥‡à¤—à¤¾à¥¤",
    },
    "rabbit": {
        "ko": "ì‹ ì¤‘í•¨ì´ ìš´ì„ ì§€í‚´. ë¬´ë¦¬ ê¸ˆì§€.",
        "en": "Caution protects luck; avoid overdoing.",
        "ja": "æ…é‡ã•ãŒé‹ã‚’å®ˆã‚‹ã€‚ç„¡ç†ã¯ç¦ç‰©ã€‚",
        "zh": "è°¨æ…å®ˆè¿ï¼Œé¿å…å‹‰å¼ºã€‚",
        "ru": "ĞÑÑ‚Ğ¾Ñ€Ğ¾Ğ¶Ğ½Ğ¾ÑÑ‚ÑŒ ÑĞ¾Ñ…Ñ€Ğ°Ğ½ÑĞµÑ‚ ÑƒĞ´Ğ°Ñ‡Ñƒ. ĞĞµ Ğ¿ĞµÑ€ĞµĞ³Ñ€ÑƒĞ¶Ğ°Ğ¹Ñ‚ĞµÑÑŒ.",
        "hi": "à¤¸à¤¾à¤µà¤§à¤¾à¤¨à¥€ à¤­à¤¾à¤—à¥à¤¯ à¤¬à¤šà¤¾à¤à¤—à¥€, à¤…à¤¤à¤¿ à¤¨ à¤•à¤°à¥‡à¤‚à¥¤",
    },
    "dragon": {
        "ko": "ìš´ê¸° ìƒìŠ¹. ì¸ì •/ìŠ¹ì§„ íë¦„.",
        "en": "Rising fortune; recognition/promotion flow.",
        "ja": "é‹æ°—ä¸Šæ˜‡ã€‚è©•ä¾¡ãƒ»æ˜‡é€²ã®æµã‚Œã€‚",
        "zh": "è¿åŠ¿ä¸Šå‡ï¼Œè®¤å¯/å‡èŒæœ‰æœ›ã€‚",
        "ru": "ĞŸĞ¾Ğ´ÑŠĞµĞ¼ ÑƒĞ´Ğ°Ñ‡Ğ¸. ĞŸÑ€Ğ¸Ğ·Ğ½Ğ°Ğ½Ğ¸Ğµ/Ğ¿Ğ¾Ğ²Ñ‹ÑˆĞµĞ½Ğ¸Ğµ.",
        "hi": "à¤­à¤¾à¤—à¥à¤¯ à¤¬à¤¢à¤¼à¥‡à¤—à¤¾, à¤®à¤¾à¤¨-à¤¸à¤®à¥à¤®à¤¾à¤¨/à¤ªà¥à¤°à¤®à¥‹à¤¶à¤¨ à¤¸à¤‚à¤­à¤µà¥¤",
    },
    "snake": {
        "ko": "ì§ê°ì´ ëˆì´ ë¨. ì‹¤ì† ì±™ê¸°ê¸°.",
        "en": "Intuition becomes money; focus on value.",
        "ja": "ç›´æ„ŸãŒå®Ÿåˆ©ã«ã€‚å …å®Ÿã•ãŒå‰ã€‚",
        "zh": "ç›´è§‰å¸¦æ¥æ”¶ç›Šï¼Œé‡è§†å®æƒ ã€‚",
        "ru": "Ğ˜Ğ½Ñ‚ÑƒĞ¸Ñ†Ğ¸Ñ Ğ¿Ñ€Ğ¸Ğ½Ğ¾ÑĞ¸Ñ‚ Ğ´ĞµĞ½ÑŒĞ³Ğ¸. ĞŸÑ€Ğ°ĞºÑ‚Ğ¸Ñ‡Ğ½Ğ¾ÑÑ‚ÑŒ Ğ²Ğ°Ğ¶Ğ½Ğ°.",
        "hi": "à¤…à¤‚à¤¤à¤°à¥à¤œà¥à¤à¤¾à¤¨ à¤§à¤¨ à¤¦à¥‡à¤—à¤¾, à¤µà¥à¤¯à¤¾à¤µà¤¹à¤¾à¤°à¤¿à¤• à¤°à¤¹à¥‡à¤‚à¥¤",
    },
    "horse": {
        "ko": "ì¶”ì§„ë ¥ ê°•í•¨. ê· í˜•ì´ í•µì‹¬.",
        "en": "Strong drive; balance is the key.",
        "ja": "æ¨é€²åŠ›ãŒå¼·ã„ã€‚ãƒãƒ©ãƒ³ã‚¹ãŒéµã€‚",
        "zh": "è¡ŒåŠ¨åŠ›å¼ºï¼Œå…³é”®åœ¨å¹³è¡¡ã€‚",
        "ru": "Ğ¡Ğ¸Ğ»ÑŒĞ½Ñ‹Ğ¹ Ğ½Ğ°Ğ¿Ğ¾Ñ€. Ğ’Ğ°Ğ¶ĞµĞ½ Ğ±Ğ°Ğ»Ğ°Ğ½Ñ.",
        "hi": "à¤œà¥‹à¤°à¤¦à¤¾à¤° à¤—à¤¤à¤¿, à¤¸à¤‚à¤¤à¥à¤²à¤¨ à¤¸à¤¬à¤¸à¥‡ à¤œà¤°à¥‚à¤°à¥€à¥¤",
    },
    "goat": {
        "ko": "í¸ì•ˆí•¨ ì† ëˆìš´. ê°€ì¡±ìš´ ì¢‹ìŒ.",
        "en": "Comfort with stable money luck; family luck is good.",
        "ja": "ç©ã‚„ã‹ãªé‡‘é‹ã€‚å®¶æ—é‹ã‚‚è‰¯å¥½ã€‚",
        "zh": "èˆ’é€‚ä¸­æœ‰è´¢è¿ï¼Œå®¶åº­è¿ä½³ã€‚",
        "ru": "Ğ¡Ğ¿Ğ¾ĞºĞ¾Ğ¹Ğ½Ğ°Ñ Ğ´ĞµĞ½ĞµĞ¶Ğ½Ğ°Ñ ÑƒĞ´Ğ°Ñ‡Ğ°. Ğ¡ĞµĞ¼ÑŒÑ Ğ¿Ğ¾Ğ´Ğ´ĞµÑ€Ğ¶Ğ¸Ñ‚.",
        "hi": "à¤¶à¤¾à¤‚à¤¤à¤¿ à¤®à¥‡à¤‚ à¤§à¤¨-à¤­à¤¾à¤—à¥à¤¯, à¤ªà¤°à¤¿à¤µà¤¾à¤° à¤•à¤¾ à¤¸à¤¾à¤¥à¥¤",
    },
    "monkey": {
        "ko": "ë³€í™”/ì¬ëŠ¥ ë°œíœ˜. ì°½ì˜ë ¥ ìƒìŠ¹.",
        "en": "Change highlights your talent; creativity rises.",
        "ja": "å¤‰åŒ–ã®ä¸­ã§æ‰èƒ½ç™ºæ®ã€‚å‰µé€ æ€§UPã€‚",
        "zh": "å˜åŒ–ä¸­å‘æŒ¥æ‰åï¼Œåˆ›é€ åŠ›ä¸Šå‡ã€‚",
        "ru": "ĞŸĞµÑ€ĞµĞ¼ĞµĞ½Ñ‹ Ñ€Ğ°ÑĞºÑ€Ñ‹Ğ²Ğ°ÑÑ‚ Ñ‚Ğ°Ğ»Ğ°Ğ½Ñ‚. Ğ¢Ğ²Ğ¾Ñ€Ñ‡ĞµÑÑ‚Ğ²Ğ¾ Ñ€Ğ°ÑÑ‚ĞµÑ‚.",
        "hi": "à¤ªà¤°à¤¿à¤µà¤°à¥à¤¤à¤¨ à¤®à¥‡à¤‚ à¤ªà¥à¤°à¤¤à¤¿à¤­à¤¾ à¤šà¤®à¤•à¥‡à¤—à¥€, à¤°à¤šà¤¨à¤¾à¤¤à¥à¤®à¤•à¤¤à¤¾ à¤¬à¤¢à¤¼à¥‡à¤—à¥€à¥¤",
    },
    "rooster": {
        "ko": "ë…¸ë ¥ ê²°ì‹¤. í‰ê°€/ì¸ì • ìš´.",
        "en": "Effort is rewarded; recognition luck.",
        "ja": "åŠªåŠ›ãŒå®Ÿã‚‹ã€‚è©•ä¾¡ãƒ»æ‰¿èªé‹ã€‚",
        "zh": "åŠªåŠ›æœ‰å›æŠ¥ï¼Œè¯„ä»·è®¤å¯è¿ä½³ã€‚",
        "ru": "Ğ¢Ñ€ÑƒĞ´ Ğ²Ğ¾Ğ·Ğ½Ğ°Ğ³Ñ€Ğ°Ğ¶Ğ´Ğ°ĞµÑ‚ÑÑ. Ğ£Ğ´Ğ°Ñ‡Ğ° Ğ¿Ñ€Ğ¸Ğ·Ğ½Ğ°Ğ½Ğ¸Ñ.",
        "hi": "à¤®à¥‡à¤¹à¤¨à¤¤ à¤•à¤¾ à¤«à¤², à¤ªà¥à¤°à¤¶à¤‚à¤¸à¤¾/à¤®à¤¾à¤¨ à¤®à¤¿à¤²à¥‡à¤—à¤¾à¥¤",
    },
    "dog": {
        "ko": "ê·€ì¸ìš´. ë„¤íŠ¸ì›Œí‚¹ì´ ê´€ê±´.",
        "en": "Helpful people appear; networking matters.",
        "ja": "è²´äººé‹ã€‚äººè„ˆãŒéµã€‚",
        "zh": "è´µäººè¿å¼ºï¼Œäººè„‰å…³é”®ã€‚",
        "ru": "ĞŸĞ¾Ğ¼Ğ¾Ñ‰Ğ½Ğ¸ĞºĞ¸ Ñ€ÑĞ´Ğ¾Ğ¼. Ğ’Ğ°Ğ¶Ğ½Ğ¾ Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğµ.",
        "hi": "à¤¸à¤¹à¤¾à¤¯à¤• à¤²à¥‹à¤— à¤®à¤¿à¤²à¥‡à¤‚à¤—à¥‡, à¤¨à¥‡à¤Ÿà¤µà¤°à¥à¤•à¤¿à¤‚à¤— à¤œà¤°à¥‚à¤°à¥€à¥¤",
    },
    "pig": {
        "ko": "ì—¬ìœ ì™€ ì¬ë¬¼. ì¦ê¸°ë©° í™•ì¥.",
        "en": "Ease and wealth; expand while enjoying.",
        "ja": "ä½™è£•ã¨è²¡ã€‚æ¥½ã—ã¿ãªãŒã‚‰åºƒã’ã‚‹ã€‚",
        "zh": "ä»å®¹ä¸è´¢å¯Œï¼Œäº«å—ä¸­æ‹“å±•ã€‚",
        "ru": "Ğ”Ğ¾ÑÑ‚Ğ°Ñ‚Ğ¾Ğº Ğ¸ ÑĞ¿Ğ¾ĞºĞ¾Ğ¹ÑÑ‚Ğ²Ğ¸Ğµ. Ğ Ğ°ÑÑˆĞ¸Ñ€ÑĞ¹Ñ‚ĞµÑÑŒ Ñ Ñ€Ğ°Ğ´Ğ¾ÑÑ‚ÑŒÑ.",
        "hi": "à¤¸à¥à¤•à¥‚à¤¨ à¤”à¤° à¤§à¤¨, à¤†à¤¨à¤‚à¤¦ à¤•à¥‡ à¤¸à¤¾à¤¥ à¤µà¤¿à¤¸à¥à¤¤à¤¾à¤°à¥¤",
    },
}

MBTI_DESC = {
    "INTJ": {"ko": "ì „ëµê°€ Â· ëª©í‘œì§€í–¥", "en": "Strategist Â· goal-driven", "ja": "æˆ¦ç•¥å®¶ Â· ç›®æ¨™å¿—å‘", "zh": "æˆ˜ç•¥å®¶ Â· ç›®æ ‡å¯¼å‘", "ru": "Ğ¡Ñ‚Ñ€Ğ°Ñ‚ĞµĞ³ Â· Ñ†ĞµĞ»ĞµÑƒÑÑ‚Ñ€ĞµĞ¼Ğ»Ñ‘Ğ½Ğ½Ñ‹Ğ¹", "hi": "à¤°à¤£à¤¨à¥€à¤¤à¤¿à¤• Â· à¤²à¤•à¥à¤·à¥à¤¯-à¤•à¥‡à¤¨à¥à¤¦à¥à¤°à¤¿à¤¤"},
    "INTP": {"ko": "ì•„ì´ë””ì–´ Â· ë¶„ì„ê°€", "en": "Analyst Â· idea-driven", "ja": "åˆ†æå®¶ Â· ç™ºæƒ³", "zh": "åˆ†æè€… Â· æƒ³æ³•é©±åŠ¨", "ru": "ĞĞ½Ğ°Ğ»Ğ¸Ñ‚Ğ¸Ğº Â· Ğ¸Ğ´ĞµĞ¸", "hi": "à¤µà¤¿à¤¶à¥à¤²à¥‡à¤·à¤• Â· à¤µà¤¿à¤šà¤¾à¤°-à¤ªà¥à¤°à¤§à¤¾à¤¨"},
    "ENTJ": {"ko": "ë¦¬ë” Â· ì¶”ì§„ë ¥", "en": "Leader Â· decisive", "ja": "æŒ‡æ®å®˜ Â· æ¨é€²åŠ›", "zh": "é¢†å¯¼è€… Â· æœæ–­", "ru": "Ğ›Ğ¸Ğ´ĞµÑ€ Â· Ñ€ĞµÑˆĞ¸Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ğ¹", "hi": "à¤¨à¥‡à¤¤à¤¾ Â· à¤¨à¤¿à¤°à¥à¤£à¤¾à¤¯à¤•"},
    "ENTP": {"ko": "í† ë¡ ê°€ Â· ë°œìƒê°€", "en": "Inventor Â· debater", "ja": "è¨è«–è€… Â· ç™ºæƒ³", "zh": "è¾©è®ºå®¶ Â· åˆ›æ„", "ru": "Ğ¡Ğ¿Ğ¾Ñ€Ñ‰Ğ¸Ğº Â· Ğ¸Ğ·Ğ¾Ğ±Ñ€ĞµÑ‚Ğ°Ñ‚ĞµĞ»ÑŒ", "hi": "à¤¬à¤¹à¤¸à¤•à¤°à¥à¤¤à¤¾ Â· à¤¨à¤µà¥‹à¤¨à¥à¤®à¥‡à¤·à¥€"},
    "INFJ": {"ko": "í†µì°° Â· ì¡°ì–¸ì", "en": "Insightful Â· advisor", "ja": "æå”±è€… Â· æ´å¯Ÿ", "zh": "æ´å¯Ÿè€… Â· é¡¾é—®", "ru": "Ğ¡Ğ¾Ğ²ĞµÑ‚Ğ½Ğ¸Ğº Â· Ğ¸Ğ½Ñ‚ÑƒĞ¸Ñ‚Ğ¸Ğ²Ğ½Ñ‹Ğ¹", "hi": "à¤…à¤‚à¤¤à¤°à¥à¤¦à¥ƒà¤·à¥à¤Ÿà¤¿ Â· à¤¸à¤²à¤¾à¤¹à¤•à¤¾à¤°"},
    "INFP": {"ko": "ê°€ì¹˜ Â· ê°ì„±", "en": "Values Â· empathic", "ja": "ä»²ä»‹è€… Â· ä¾¡å€¤è¦³", "zh": "è°ƒåœè€… Â· å…±æƒ…", "ru": "Ğ˜Ğ´ĞµĞ°Ğ»Ğ¸ÑÑ‚ Â· ÑĞ¼Ğ¿Ğ°Ñ‚Ğ¸Ñ‡Ğ½Ñ‹Ğ¹", "hi": "à¤®à¥‚à¤²à¥à¤¯ Â· à¤¸à¤¹à¤¾à¤¨à¥à¤­à¥‚à¤¤à¤¿à¤¶à¥€à¤²"},
    "ENFJ": {"ko": "ì¡°ìœ¨ Â· ë¦¬ë”", "en": "Coordinator Â· leader", "ja": "ä¸»äººå…¬ Â· èª¿æ•´", "zh": "ä¸»äººå…¬ Â· åè°ƒ", "ru": "ĞĞ°ÑÑ‚Ğ°Ğ²Ğ½Ğ¸Ğº Â· Ğ»Ğ¸Ğ´ĞµÑ€", "hi": "à¤¸à¤®à¤¨à¥à¤µà¤¯à¤• Â· à¤¨à¥‡à¤¤à¤¾"},
    "ENFP": {"ko": "ì—´ì • Â· ì•„ì´ë””ì–´", "en": "Energetic Â· creative", "ja": "é‹å‹•å®¶ Â· æƒ…ç†±", "zh": "ç«é€‰è€… Â· çƒ­æƒ…", "ru": "Ğ­Ğ½Ñ‚ÑƒĞ·Ğ¸Ğ°ÑÑ‚ Â· Ñ‚Ğ²Ğ¾Ñ€Ñ‡ĞµÑĞºĞ¸Ğ¹", "hi": "à¤‰à¤¤à¥à¤¸à¤¾à¤¹à¥€ Â· à¤°à¤šà¤¨à¤¾à¤¤à¥à¤®à¤•"},
    "ISTJ": {"ko": "ì›ì¹™ Â· ì±…ì„", "en": "Responsible Â· orderly", "ja": "ç®¡ç†è€… Â· è²¬ä»»", "zh": "ç‰©æµå¸ˆ Â· è´Ÿè´£", "ru": "Ğ˜ÑĞ¿Ğ¾Ğ»Ğ½Ğ¸Ñ‚ĞµĞ»ÑŒ Â· Ğ¿Ğ¾Ñ€ÑĞ´Ğ¾Ğº", "hi": "à¤œà¤¿à¤®à¥à¤®à¥‡à¤¦à¤¾à¤° Â· à¤µà¥à¤¯à¤µà¤¸à¥à¤¥à¤¿à¤¤"},
    "ISFJ": {"ko": "ë°°ë ¤ Â· í—Œì‹ ", "en": "Caring Â· supportive", "ja": "æ“è­·è€… Â· é…æ…®", "zh": "å®ˆå«è€… Â· ä½“è´´", "ru": "Ğ—Ğ°Ñ‰Ğ¸Ñ‚Ğ½Ğ¸Ğº Â· Ğ·Ğ°Ğ±Ğ¾Ñ‚Ğ°", "hi": "à¤¦à¥‡à¤–à¤­à¤¾à¤² Â· à¤¸à¤¹à¤¯à¥‹à¤—à¥€"},
    "ESTJ": {"ko": "ê´€ë¦¬ì Â· í˜„ì‹¤/ì„±ê³¼", "en": "Executor Â· practical", "ja": "å¹¹éƒ¨ Â· ç¾å®Ÿ", "zh": "æ€»ç»ç† Â· ç°å®", "ru": "ĞĞ´Ğ¼Ğ¸Ğ½Ğ¸ÑÑ‚Ñ€Ğ°Ñ‚Ğ¾Ñ€ Â· Ğ¿Ñ€Ğ°ĞºÑ‚Ğ¸Ğº", "hi": "à¤ªà¥à¤°à¤¬à¤‚à¤§à¤• Â· à¤µà¥à¤¯à¤¾à¤µà¤¹à¤¾à¤°à¤¿à¤•"},
    "ESFJ": {"ko": "ë¶„ìœ„ê¸° Â· ì¼€ì–´", "en": "Warm Â· community", "ja": "é ˜äº‹ Â· æ€ã„ã‚„ã‚Š", "zh": "æ‰§æ”¿å®˜ Â· å…³æ€€", "ru": "ĞšĞ¾Ğ½ÑÑƒĞ» Â· Ğ·Ğ°Ğ±Ğ¾Ñ‚Ğ°", "hi": "à¤®à¤¿à¤²à¤¨à¤¸à¤¾à¤° Â· à¤¦à¥‡à¤–à¤­à¤¾à¤²"},
    "ISTP": {"ko": "ì¥ì¸ Â· ë¬¸ì œí•´ê²°", "en": "Tinkerer Â· solver", "ja": "å·¨åŒ  Â· è§£æ±º", "zh": "é‰´èµå®¶ Â· è§£å†³", "ru": "ĞœĞ°ÑÑ‚ĞµÑ€ Â· Ñ€ĞµÑˆĞ°Ñ‚ĞµĞ»ÑŒ", "hi": "à¤•à¥à¤¶à¤² Â· à¤¸à¤®à¤¸à¥à¤¯à¤¾-à¤¸à¤®à¤¾à¤§à¤¾à¤¨"},
    "ISFP": {"ko": "ê°ì„± Â· íëŸ¬", "en": "Gentle Â· artistic", "ja": "å†’é™ºå®¶ Â· æ„Ÿæ€§", "zh": "æ¢é™©å®¶ Â· æ„Ÿæ€§", "ru": "Ğ¥ÑƒĞ´Ğ¾Ğ¶Ğ½Ğ¸Ğº Â· Ğ¼ÑĞ³ĞºĞ¸Ğ¹", "hi": "à¤•à¤²à¤¾à¤¤à¥à¤®à¤• Â· à¤¸à¤‚à¤µà¥‡à¤¦à¤¨à¤¶à¥€à¤²"},
    "ESTP": {"ko": "ëª¨í—˜ Â· ì‹¤í–‰", "en": "Action Â· risk-taking", "ja": "èµ·æ¥­å®¶ Â· å®Ÿè¡Œ", "zh": "ä¼ä¸šå®¶ Â· æ‰§è¡Œ", "ru": "Ğ”ĞµĞ»ĞµÑ† Â· Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ğµ", "hi": "à¤¸à¤¾à¤¹à¤¸à¥€ Â· à¤•à¤¾à¤°à¥à¤¯à¤¶à¥€à¤²"},
    "ESFP": {"ko": "ì‚¬êµ Â· ì¦ê±°ì›€", "en": "Fun Â· social", "ja": "ã‚¨ãƒ³ã‚¿ãƒ¼ãƒ†ã‚¤ãƒŠãƒ¼ Â· ç¤¾äº¤", "zh": "è¡¨æ¼”è€… Â· ç¤¾äº¤", "ru": "ĞÑ€Ñ‚Ğ¸ÑÑ‚ Â· Ğ¾Ğ±Ñ‰Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ğ¹", "hi": "à¤®à¤¸à¥à¤¤à¥€ Â· à¤¸à¤¾à¤®à¤¾à¤œà¤¿à¤•"},
}

SAJU_MSGS = {
    "ko": [
        "ì˜¤í–‰ ê· í˜• â†’ ë¬´ë¦¬í•˜ì§€ ì•Šìœ¼ë©´ ì „ë°˜ì ìœ¼ë¡œ ëŒ€ê¸¸!",
        "ëª©(æœ¨) ê¸°ìš´ â†’ ì„±ì¥ê³¼ í™•ì¥ì˜ í•´!",
        "í™”(ç«) ê¸°ìš´ â†’ ì—´ì •ì´ ì„±ê³¼ë¡œ ì—°ê²°!",
        "í† (åœŸ) ê¸°ìš´ â†’ ì•ˆì •ê³¼ ì¬ë¬¼ìš´ ê°•í™”!",
        "ê¸ˆ(é‡‘) ê¸°ìš´ â†’ ê²°ë‹¨ì´ ìš´ì„ ì—°ë‹¤!",
        "ìˆ˜(æ°´) ê¸°ìš´ â†’ íë¦„ì„ íƒ€ë©´ ê¸°íšŒê°€ ì˜¨ë‹¤!",
    ],
    "en": [
        "Balanced elements â†’ steady luck if you don't overdo.",
        "Wood â†’ a year of growth and expansion.",
        "Fire â†’ passion turns into results.",
        "Earth â†’ stability and wealth strengthen.",
        "Metal â†’ decisive moves open luck.",
        "Water â†’ go with the flow to find chances.",
    ],
    "ja": [
        "äº”è¡Œãƒãƒ©ãƒ³ã‚¹â†’ç„¡ç†ã‚’ã—ãªã‘ã‚Œã°å…¨ä½“é‹â—ã€‚",
        "æœ¨â†’æˆé•·ã¨æ‹¡å¤§ã®å¹´ã€‚",
        "ç«â†’æƒ…ç†±ãŒæˆæœã«ç¹‹ãŒã‚‹ã€‚",
        "åœŸâ†’å®‰å®šã¨é‡‘é‹ãŒå¼·ã¾ã‚‹ã€‚",
        "é‡‘â†’æ±ºæ–­ãŒé‹ã‚’é–‹ãã€‚",
        "æ°´â†’æµã‚Œã«ä¹—ã‚‹ã¨å¥½æ©Ÿã€‚",
    ],
    "zh": [
        "äº”è¡Œå‡è¡¡â†’ä¸è¿‡åº¦ç”¨åŠ›åˆ™æ•´ä½“å¤§å‰ã€‚",
        "æœ¨â†’æˆé•¿ä¸æ‰©å¼ çš„ä¸€å¹´ã€‚",
        "ç«â†’çƒ­æƒ…è½¬åŒ–ä¸ºæˆæœã€‚",
        "åœŸâ†’ç¨³å®šä¸è´¢è¿å¢å¼ºã€‚",
        "é‡‘â†’å†³æ–­æ‰“å¼€å¥½è¿ã€‚",
        "æ°´â†’é¡ºåŠ¿è€Œä¸ºå¾—æœºä¼šã€‚",
    ],
    "ru": [
        "Ğ‘Ğ°Ğ»Ğ°Ğ½Ñ ÑÑ‚Ğ¸Ñ…Ğ¸Ğ¹ â†’ ÑƒĞ´Ğ°Ñ‡Ğ° ÑÑ‚Ğ°Ğ±Ğ¸Ğ»ÑŒĞ½Ğ°, ĞµÑĞ»Ğ¸ Ğ½Ğµ Ğ¿ĞµÑ€ĞµĞ³Ñ€ÑƒĞ¶Ğ°Ñ‚ÑŒÑÑ.",
        "Ğ”ĞµÑ€ĞµĞ²Ğ¾ â†’ Ñ€Ğ¾ÑÑ‚ Ğ¸ Ñ€Ğ°ÑÑˆĞ¸Ñ€ĞµĞ½Ğ¸Ğµ.",
        "ĞĞ³Ğ¾Ğ½ÑŒ â†’ ÑÑ‚Ñ€Ğ°ÑÑ‚ÑŒ Ğ¿Ñ€ĞµĞ²Ñ€Ğ°Ñ‰Ğ°ĞµÑ‚ÑÑ Ğ² Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚.",
        "Ğ—ĞµĞ¼Ğ»Ñ â†’ ÑÑ‚Ğ°Ğ±Ğ¸Ğ»ÑŒĞ½Ğ¾ÑÑ‚ÑŒ Ğ¸ Ğ´ĞµĞ½ÑŒĞ³Ğ¸ ÑƒÑĞ¸Ğ»Ğ¸Ğ²Ğ°ÑÑ‚ÑÑ.",
        "ĞœĞµÑ‚Ğ°Ğ»Ğ» â†’ Ñ€ĞµÑˆĞ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ÑÑ‚ÑŒ Ğ¾Ñ‚ĞºÑ€Ñ‹Ğ²Ğ°ĞµÑ‚ ÑƒĞ´Ğ°Ñ‡Ñƒ.",
        "Ğ’Ğ¾Ğ´Ğ° â†’ Ğ¿Ğ¾Ğ¹Ğ¼Ğ°Ğ¹Ñ‚Ğµ Ğ¿Ğ¾Ñ‚Ğ¾Ğº â€” Ğ¿Ñ€Ğ¸Ğ´ÑƒÑ‚ ÑˆĞ°Ğ½ÑÑ‹.",
    ],
    "hi": [
        "à¤ªà¤‚à¤šà¤¤à¤¤à¥à¤µ à¤¸à¤‚à¤¤à¥à¤²à¤¨ â†’ à¤…à¤¤à¤¿ à¤¨ à¤•à¤°à¥‡à¤‚ à¤¤à¥‹ à¤¸à¤®à¤—à¥à¤° à¤­à¤¾à¤—à¥à¤¯ à¤…à¤šà¥à¤›à¤¾à¥¤",
        "à¤•à¤¾à¤·à¥à¤ (à¤µà¥à¤¡) â†’ à¤µà¤¿à¤•à¤¾à¤¸ à¤”à¤° à¤µà¤¿à¤¸à¥à¤¤à¤¾à¤° à¤•à¤¾ à¤µà¤°à¥à¤·à¥¤",
        "à¤…à¤—à¥à¤¨à¤¿ â†’ à¤œà¥à¤¨à¥‚à¤¨ à¤ªà¤°à¤¿à¤£à¤¾à¤® à¤¦à¥‡à¤—à¤¾à¥¤",
        "à¤ªà¥ƒà¤¥à¥à¤µà¥€ â†’ à¤¸à¥à¤¥à¤¿à¤°à¤¤à¤¾ à¤”à¤° à¤§à¤¨-à¤­à¤¾à¤—à¥à¤¯ à¤¬à¤¢à¤¼à¥‡à¤—à¤¾à¥¤",
        "à¤§à¤¾à¤¤à¥ â†’ à¤¨à¤¿à¤°à¥à¤£à¤¯ à¤•à¥à¤·à¤®à¤¤à¤¾ à¤­à¤¾à¤—à¥à¤¯ à¤–à¥‹à¤²à¥‡à¤—à¥€à¥¤",
        "à¤œà¤² â†’ à¤ªà¥à¤°à¤µà¤¾à¤¹ à¤•à¥‡ à¤¸à¤¾à¤¥ à¤šà¤²à¥‡à¤‚, à¤®à¥Œà¤•à¥‡ à¤®à¤¿à¤²à¥‡à¤‚à¤—à¥‡à¥¤",
    ],
}

DAILY = {
    "ko": [
        "ì •ë¦¬í•˜ë©´ ìš´ì´ ì—´ë¦½ë‹ˆë‹¤.",
        "ì‚¬ëŒ ìš´ì´ ê°•í•´ìš”. ì˜¤ëŠ˜ì€ ëŒ€í™”ê°€ ì—´ì‡ !",
        "ì‘ì€ ê¸°íšŒê°€ ì»¤ì§‘ë‹ˆë‹¤. ì¦‰í¥ë³´ë‹¤ ê³„íš!",
        "ì¶©ë™êµ¬ë§¤ë§Œ ë§‰ìœ¼ë©´ ì¬ë¬¼ìš´ì´ ë¶™ì–´ìš”.",
        "ì§‘ì¤‘ë ¥ì´ ì¢‹ì•„ìš”. ì§§ê²Œ ëª°ì…í•˜ë©´ ì„±ê³¼!",
        "ë¬´ë¦¬í•œ ì¼ì •ì€ ê¸ˆë¬¼. ì»¨ë””ì…˜ ê´€ë¦¬ê°€ 1ìˆœìœ„!",
    ],
    "en": [
        "Tidying up opens luck.",
        "People luck is strongâ€”talk is the key.",
        "Small chances growâ€”plan over impulse.",
        "Avoid impulse buys to keep money luck.",
        "Short deep focus brings results.",
        "Don't overbookâ€”health first.",
    ],
    "ja": [
        "ç‰‡ä»˜ã‘ã‚‹ã¨é‹ãŒé–‹ãã€‚",
        "äººé‹ãŒå¼·ã„ã€‚ä¼šè©±ãŒéµã€‚",
        "å°ã•ãªãƒãƒ£ãƒ³ã‚¹ãŒå¤§ãããªã‚‹ã€‚è¨ˆç”»å„ªå…ˆã€‚",
        "è¡å‹•è²·ã„ã‚’æŠ‘ãˆã‚‹ã¨é‡‘é‹UPã€‚",
        "çŸ­ã„é›†ä¸­ã§æˆæœãŒå‡ºã‚‹ã€‚",
        "è©°ã‚è¾¼ã¿ã™ãæ³¨æ„ã€‚ä½“èª¿æœ€å„ªå…ˆã€‚",
    ],
    "zh": [
        "æ•´ç†èƒ½å¸¦æ¥å¥½è¿ã€‚",
        "äººé™…è¿å¼ºï¼Œæ²Ÿé€šæ˜¯å…³é”®ã€‚",
        "å°æœºä¼šä¼šå˜å¤§ï¼Œè®¡åˆ’èƒœè¿‡å†²åŠ¨ã€‚",
        "æ§åˆ¶å†²åŠ¨æ¶ˆè´¹ï¼Œè´¢è¿æ›´ç¨³ã€‚",
        "çŸ­æ—¶é—´ä¸“æ³¨æ›´æœ‰æ•ˆã€‚",
        "åˆ«æ’å¤ªæ»¡ï¼Œå¥åº·ä¼˜å…ˆã€‚",
    ],
    "ru": [
        "ĞŸĞ¾Ñ€ÑĞ´Ğ¾Ğº Ğ²Ğ¾ĞºÑ€ÑƒĞ³ â€” ÑƒĞ´Ğ°Ñ‡Ğ° Ğ²Ğ½ÑƒÑ‚Ñ€Ğ¸.",
        "Ğ¡Ğ¸Ğ»ÑŒĞ½Ğ°Ñ ÑƒĞ´Ğ°Ñ‡Ğ° Ñ‡ĞµÑ€ĞµĞ· Ğ»ÑĞ´ĞµĞ¹: Ñ€Ğ°Ğ·Ğ³Ğ¾Ğ²Ğ¾Ñ€ Ñ€ĞµÑˆĞ°ĞµÑ‚.",
        "ĞœĞ°Ğ»Ñ‹Ğ¹ ÑˆĞ°Ğ½Ñ Ğ²Ñ‹Ñ€Ğ°ÑÑ‚ĞµÑ‚ â€” Ğ¿Ğ»Ğ°Ğ½ Ğ²Ğ°Ğ¶Ğ½ĞµĞµ Ğ¸Ğ¼Ğ¿ÑƒĞ»ÑŒÑĞ°.",
        "ĞÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ¸Ñ‚Ğµ Ğ¸Ğ¼Ğ¿ÑƒĞ»ÑŒÑĞ½Ñ‹Ğµ Ğ¿Ğ¾ĞºÑƒĞ¿ĞºĞ¸ â€” Ğ´ĞµĞ½ÑŒĞ³Ğ¸ Ğ¾ÑÑ‚Ğ°Ğ½ÑƒÑ‚ÑÑ.",
        "ĞšĞ¾Ñ€Ğ¾Ñ‚ĞºĞ¸Ğ¹ Ñ„Ğ¾ĞºÑƒÑ Ğ´Ğ°Ñ‘Ñ‚ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚.",
        "ĞĞµ Ğ¿ĞµÑ€ĞµĞ³Ñ€ÑƒĞ¶Ğ°Ğ¹Ñ‚ĞµÑÑŒ â€” Ğ·Ğ´Ğ¾Ñ€Ğ¾Ğ²ÑŒĞµ Ğ²Ğ°Ğ¶Ğ½ĞµĞµ.",
    ],
    "hi": [
        "à¤¸à¤«à¤¾à¤ˆ/à¤µà¥à¤¯à¤µà¤¸à¥à¤¥à¤¾ à¤¸à¥‡ à¤­à¤¾à¤—à¥à¤¯ à¤–à¥à¤²à¤¤à¤¾ à¤¹à¥ˆà¥¤",
        "à¤²à¥‹à¤—à¥‹à¤‚ à¤¸à¥‡ à¤²à¤¾à¤­â€”à¤†à¤œ à¤¬à¤¾à¤¤à¤šà¥€à¤¤ à¤®à¤¹à¤¤à¥à¤µà¤ªà¥‚à¤°à¥à¤£à¥¤",
        "à¤›à¥‹à¤Ÿà¤¾ à¤®à¥Œà¤•à¤¾ à¤¬à¤¡à¤¼à¤¾ à¤¬à¤¨à¥‡à¤—à¤¾â€”à¤¯à¥‹à¤œà¤¨à¤¾ à¤°à¤–à¥‡à¤‚à¥¤",
        "à¤†à¤µà¥‡à¤— à¤®à¥‡à¤‚ à¤–à¤°à¥€à¤¦à¤¾à¤°à¥€ à¤°à¥‹à¤•à¥‡à¤‚, à¤§à¤¨-à¤­à¤¾à¤—à¥à¤¯ à¤¬à¤¢à¤¼à¥‡à¤—à¤¾à¥¤",
        "à¤•à¤® à¤¸à¤®à¤¯ à¤•à¤¾ à¤—à¤¹à¤°à¤¾ à¤«à¥‹à¤•à¤¸ à¤¬à¥‡à¤¹à¤¤à¤° à¤¹à¥ˆà¥¤",
        "à¤…à¤§à¤¿à¤• à¤¶à¥‡à¤¡à¥à¤¯à¥‚à¤² à¤¨ à¤•à¤°à¥‡à¤‚â€”à¤¸à¥à¤µà¤¾à¤¸à¥à¤¥à¥à¤¯ à¤ªà¤¹à¤²à¥‡à¥¤",
    ],
}

YEAR_ALL = {
    "ko": [
        "ê¾¸ì¤€í•¨ì´ ëŒ€ë°•ì„ ë§Œë“­ë‹ˆë‹¤. ì‘ì€ ìŠµê´€ì´ í° ê²°ê³¼ë¡œ!",
        "ì‚¬ëŒê³¼ ì¸ì—°ì´ í”¼ì–´ë‚˜ëŠ” í•´. ì†Œê°œ/í˜‘ì—…ìš´ ìƒìŠ¹!",
        "ë„ì „í•˜ë©´ ì„±ê³¼ê°€ ë”°ë¼ì˜µë‹ˆë‹¤. ë‹¨, ë¬´ë¦¬í•œ ë² íŒ…ì€ ê¸ˆì§€!",
        "ì •ë¦¬Â·ì •ëˆì´ ìš´ì„ í‚¤ì›ë‹ˆë‹¤. ë¯¸ë¤„ë‘” ì¼ì„ ì •ë¦¬í•´ë³´ì„¸ìš”.",
    ],
    "en": [
        "Consistency creates big luckâ€”small habits matter.",
        "Connections bloomâ€”collaboration opportunities rise.",
        "Challenges pay off, but avoid reckless bets.",
        "Organizing your life boosts your fortune.",
    ],
    "ja": [
        "ç¶™ç¶šãŒå¤§ããªé‹ã‚’ä½œã‚‹ã€‚å°ã•ãªç¿’æ…£ãŒå¤§æˆæœã¸ã€‚",
        "äººè„ˆãŒåºƒãŒã‚‹å¹´ã€‚ç´¹ä»‹ãƒ»å”æ¥­é‹UPã€‚",
        "æŒ‘æˆ¦ã¯æˆæœã«ã€‚ãŸã ã—ç„¡ç†ãªè³­ã‘ã¯NGã€‚",
        "æ•´ç†æ•´é “ã§é‹æ°—ãŒä¸ŠãŒã‚‹ã€‚å¾Œå›ã—ã‚’ç‰‡ä»˜ã‘ã¦ã€‚",
    ],
    "zh": [
        "åšæŒå¸¦æ¥å¤§å¥½è¿ï¼Œå°ä¹ æƒ¯æˆå¤§ç»“æœã€‚",
        "äººè„‰å¼€èŠ±ï¼Œä»‹ç»/åˆä½œæœºä¼šå¢å¤šã€‚",
        "æŒ‘æˆ˜æœ‰å›æŠ¥ï¼Œä½†é¿å…å†’é™©ä¸‹æ³¨ã€‚",
        "æ•´ç†ç”Ÿæ´»èƒ½æå‡è¿åŠ¿ï¼Œæ¸…æ‰æ‹–å»¶ã€‚",
    ],
    "ru": [
        "ĞŸĞ¾ÑÑ‚Ğ¾ÑĞ½ÑÑ‚Ğ²Ğ¾ ÑĞ¾Ğ·Ğ´Ğ°Ñ‘Ñ‚ ÑƒĞ´Ğ°Ñ‡Ñƒ: Ğ¼Ğ°Ğ»ĞµĞ½ÑŒĞºĞ¸Ğµ Ğ¿Ñ€Ğ¸Ğ²Ñ‹Ñ‡ĞºĞ¸ â€” Ğ±Ğ¾Ğ»ÑŒÑˆĞ¸Ğµ Ğ¸Ñ‚Ğ¾Ğ³Ğ¸.",
        "Ğ¡Ğ²ÑĞ·Ğ¸ Ñ€Ğ°ÑÑ†Ğ²ĞµÑ‚Ğ°ÑÑ‚: Ñ€Ğ¾ÑÑ‚ ÑĞ¾Ñ‚Ñ€ÑƒĞ´Ğ½Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ°.",
        "Ğ’Ñ‹Ğ·Ğ¾Ğ²Ñ‹ Ğ¾ĞºÑƒĞ¿Ğ°ÑÑ‚ÑÑ, Ğ½Ğ¾ Ğ¸Ğ·Ğ±ĞµĞ³Ğ°Ğ¹Ñ‚Ğµ Ñ€Ğ¸ÑĞºĞ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ñ… ÑÑ‚Ğ°Ğ²Ğ¾Ğº.",
        "ĞŸĞ¾Ñ€ÑĞ´Ğ¾Ğº Ğ² Ğ´ĞµĞ»Ğ°Ñ… ÑƒÑĞ¸Ğ»Ğ¸Ğ²Ğ°ĞµÑ‚ ÑƒĞ´Ğ°Ñ‡Ñƒ â€” Ğ·Ğ°ĞºÑ€Ğ¾Ğ¹Ñ‚Ğµ Ñ…Ğ²Ğ¾ÑÑ‚Ñ‹.",
    ],
    "hi": [
        "à¤²à¤—à¤¾à¤¤à¤¾à¤° à¤ªà¥à¤°à¤¯à¤¾à¤¸ à¤¸à¥‡ à¤¬à¤¡à¤¼à¤¾ à¤­à¤¾à¤—à¥à¤¯ à¤¬à¤¨à¤¤à¤¾ à¤¹à¥ˆâ€”à¤›à¥‹à¤Ÿà¥€ à¤†à¤¦à¤¤à¥‡à¤‚ à¤¬à¤¡à¤¼à¤¾ à¤ªà¤°à¤¿à¤£à¤¾à¤®à¥¤",
        "à¤°à¤¿à¤¶à¥à¤¤à¥‡/à¤¨à¥‡à¤Ÿà¤µà¤°à¥à¤• à¤¬à¤¢à¤¼à¥‡à¤‚à¤—à¥‡â€”à¤¸à¤¹à¤¯à¥‹à¤— à¤•à¥‡ à¤®à¥Œà¤•à¥‡à¥¤",
        "à¤šà¥à¤¨à¥Œà¤¤à¥€ à¤•à¤¾ à¤«à¤² à¤®à¤¿à¤²à¥‡à¤—à¤¾, à¤ªà¤° à¤œà¥‹à¤–à¤¿à¤® à¤­à¤°à¥‡ à¤¦à¤¾à¤‚à¤µ à¤¸à¥‡ à¤¬à¤šà¥‡à¤‚à¥¤",
        "à¤µà¥à¤¯à¤µà¤¸à¥à¤¥à¤¾/à¤¸à¤‚à¤—à¤ à¤¨ à¤¸à¥‡ à¤­à¤¾à¤—à¥à¤¯ à¤¬à¤¢à¤¼à¥‡à¤—à¤¾â€”à¤²à¤Ÿà¤•à¥‡ à¤•à¤¾à¤® à¤¨à¤¿à¤ªà¤Ÿà¤¾à¤à¤à¥¤",
    ],
}

# =========================================================
# 4) Helpers
# =========================================================
def calc_zodiac_key(year: int) -> str:
    idx = (year - 4) % 12
    return ZODIAC_ORDER[idx]

def get_saju(lang: str, y: int, m: int, d: int) -> str:
    base = (y + m + d) % 6
    arr = SAJU_MSGS.get(lang, SAJU_MSGS["en"])
    return arr[base]

def seeded_daily(lang: str, zodiac_key: str, offset: int = 0) -> str:
    day = datetime.now() + timedelta(days=offset)
    seed = int(day.strftime("%Y%m%d")) + ZODIAC_ORDER.index(zodiac_key) * 17
    random.seed(seed)
    arr = DAILY.get(lang, DAILY["en"])
    return random.choice(arr)

def year_overall(lang: str, zodiac_key: str, mbti: str) -> str:
    seed = ZODIAC_ORDER.index(zodiac_key) * 101 + sum(ord(c) for c in mbti)
    random.seed(seed)
    arr = YEAR_ALL.get(lang, YEAR_ALL["en"])
    return random.choice(arr)

def pick_tarot(lang: str):
    k = random.choice(list(TAROT.keys()))
    meaning = TAROT[k].get(lang, TAROT[k]["en"])
    return k, meaning

def combo_advice(lang: str, mbti: str) -> str:
    ei = mbti[0]; sn = mbti[1]; tf = mbti[2]; jp = mbti[3]

    if lang == "ko":
        return "\n".join([
            "ì—°ì• ìš´: " + ("ê°ì • êµë¥˜ê°€ ìš´ì„ í‚¤ì›ë‹ˆë‹¤. ì˜¤ëŠ˜ì€ â€˜ê³µê° í•œ ë§ˆë””â€™ë¥¼ ë¨¼ì €!" if tf == "F"
                      else "í•´ê²°í•˜ë ¤ ë“¤ê¸°ë³´ë‹¤ â€˜ë“£ê¸°â€™ê°€ í¬ì¸íŠ¸. ë…¼ë¦¬ 50%, ê³µê° 50%!"),
            "ì¬ë¬¼ìš´: " + ("ê³„íší˜•ì´ë¼ ì§€ì¶œ í†µì œê°€ ê°•ì . ì˜ˆì‚°í‘œ/ìë™ì´ì²´ë¡œ ìš´ì„ êµ³íˆì„¸ìš”." if jp == "J"
                      else "ì¦‰í¥ì§€ì¶œë§Œ ë§‰ìœ¼ë©´ ì¢‹ì•„ì ¸ìš”. â€˜í•˜ë£¨ ë’¤ êµ¬ë§¤â€™ ë£° ì¶”ì²œ."),
            "ì¼/í•™ì—…ìš´: " + ("í°ê·¸ë¦¼ ê°•ì ! ì²´í¬ë¦¬ìŠ¤íŠ¸ë¡œ ì‹¤í–‰í•˜ë©´ ì„±ê³¼ í­ë°œ." if sn == "N"
                        else "ë””í…Œì¼ ê°•ì ! ë£¨í‹´ì„ ë§Œë“¤ë©´ ì•ˆì •ì ìœ¼ë¡œ ì„±ê³¼ ìƒìŠ¹."),
            "ê±´ê°•ìš´: " + ("ëŒ€ì™¸í™œë™ ê³¼ì—´ ì£¼ì˜. ìˆ˜ë©´/ì¹´í˜ì¸ ì¡°ì ˆì´ í•µì‹¬." if ei == "E"
                      else "í˜¼ì íšŒë³µì´ ì¤‘ìš”. 5ë¶„ ì‚°ì±…+ìŠ¤íŠ¸ë ˆì¹­ ì¶”ì²œ."),
        ])

    # ë‹¤ë¥¸ ì–¸ì–´ëŠ” â€œì˜ì–´ë§Œâ€ ì•ˆ ë‚˜ì˜¤ê²Œ ê°„ë‹¨ ë²ˆì—­ ì œê³µ
    adv = {
        "en": [
            "Love: Listen first, then respond with empathy.",
            "Money: Avoid impulse buys; a simple budget helps.",
            "Work/Study: Turn strengths into a checklist and execute.",
            "Health: Keep sleep consistent; short walks help.",
        ],
        "ja": [
            "æ‹æ„›: ã¾ãšèãâ†’å…±æ„Ÿã®ä¸€è¨€ãŒéµã€‚",
            "é‡‘é‹: è¡å‹•è²·ã„ã‚’æŠ‘ãˆã€ç°¡å˜ãªäºˆç®—ç®¡ç†ã‚’ã€‚",
            "ä»•äº‹/å­¦æ¥­: ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆåŒ–ã™ã‚‹ã¨æˆæœUPã€‚",
            "å¥åº·: ç¡çœ ã‚’æ•´ãˆã€çŸ­ã„æ•£æ­©ãŒâ—ã€‚",
        ],
        "zh": [
            "æ‹çˆ±: å…ˆå€¾å¬ï¼Œå†ç»™å…±æƒ…å›åº”ã€‚",
            "è´¢è¿: æ§åˆ¶å†²åŠ¨æ¶ˆè´¹ï¼Œåšä¸ªç®€å•é¢„ç®—ã€‚",
            "å·¥ä½œ/å­¦ä¹ : æŠŠä¼˜åŠ¿å†™æˆæ¸…å•å¹¶æ‰§è¡Œã€‚",
            "å¥åº·: è§„å¾‹ç¡çœ ï¼ŒçŸ­èµ°åŠ¨å¾ˆæœ‰æ•ˆã€‚",
        ],
        "ru": [
            "Ğ›ÑĞ±Ğ¾Ğ²ÑŒ: Ğ¡Ğ½Ğ°Ñ‡Ğ°Ğ»Ğ° ÑĞ»ÑƒÑˆĞ°Ğ¹Ñ‚Ğµ, Ğ·Ğ°Ñ‚ĞµĞ¼ Ğ´Ğ¾Ğ±Ğ°Ğ²ÑŒÑ‚Ğµ ÑĞ¾Ñ‡ÑƒĞ²ÑÑ‚Ğ²Ğ¸Ğµ.",
            "Ğ”ĞµĞ½ÑŒĞ³Ğ¸: Ğ˜Ğ·Ğ±ĞµĞ³Ğ°Ğ¹Ñ‚Ğµ Ğ¸Ğ¼Ğ¿ÑƒĞ»ÑŒÑĞ½Ñ‹Ñ… Ğ¿Ğ¾ĞºÑƒĞ¿Ğ¾Ğº; Ğ±ÑĞ´Ğ¶ĞµÑ‚ Ğ¿Ğ¾Ğ¼Ğ¾Ğ³Ğ°ĞµÑ‚.",
            "Ğ Ğ°Ğ±Ğ¾Ñ‚Ğ°/Ğ£Ñ‡Ñ‘Ğ±Ğ°: ĞŸÑ€ĞµĞ²Ñ€Ğ°Ñ‚Ğ¸Ñ‚Ğµ ÑĞ¸Ğ»ÑŒĞ½Ñ‹Ğµ ÑÑ‚Ğ¾Ñ€Ğ¾Ğ½Ñ‹ Ğ² Ñ‡ĞµĞº-Ğ»Ğ¸ÑÑ‚.",
            "Ğ—Ğ´Ğ¾Ñ€Ğ¾Ğ²ÑŒĞµ: Ğ ĞµĞ¶Ğ¸Ğ¼ ÑĞ½Ğ° + ĞºĞ¾Ñ€Ğ¾Ñ‚ĞºĞ¸Ğµ Ğ¿Ñ€Ğ¾Ğ³ÑƒĞ»ĞºĞ¸.",
        ],
        "hi": [
            "à¤ªà¥à¤¯à¤¾à¤°: à¤ªà¤¹à¤²à¥‡ à¤¸à¥à¤¨à¥‡à¤‚, à¤«à¤¿à¤° à¤¸à¤¹à¤¾à¤¨à¥à¤­à¥‚à¤¤à¤¿ à¤•à¥‡ à¤¸à¤¾à¤¥ à¤œà¤µà¤¾à¤¬ à¤¦à¥‡à¤‚à¥¤",
            "à¤§à¤¨: à¤†à¤µà¥‡à¤— à¤®à¥‡à¤‚ à¤–à¤°à¥à¤š à¤°à¥‹à¤•à¥‡à¤‚; à¤›à¥‹à¤Ÿà¤¾ à¤¬à¤œà¤Ÿ à¤®à¤¦à¤¦ à¤•à¤°à¥‡à¤—à¤¾à¥¤",
            "à¤•à¤¾à¤®/à¤ªà¤¢à¤¼à¤¾à¤ˆ: à¤…à¤ªà¤¨à¥€ à¤¤à¤¾à¤•à¤¤ à¤•à¥‹ à¤šà¥‡à¤•à¤²à¤¿à¤¸à¥à¤Ÿ à¤¬à¤¨à¤¾à¤•à¤° à¤•à¤°à¥‡à¤‚à¥¤",
            "à¤¸à¥à¤µà¤¾à¤¸à¥à¤¥à¥à¤¯: à¤¨à¥€à¤‚à¤¦ à¤¨à¤¿à¤¯à¤®à¤¿à¤¤ à¤°à¤–à¥‡à¤‚, à¤›à¥‹à¤Ÿà¥€ à¤µà¥‰à¤• à¤•à¤°à¥‡à¤‚à¥¤",
        ],
    }
    return "\n".join(adv.get(lang, adv["en"]))

# =========================================================
# 5) Google Sheet (columns fixed)
#  ì‹œê°„ | ì´ë¦„ | ì „í™”ë²ˆí˜¸ | ì–¸ì–´ | ê¸°ë¡ì´ˆ | ê³µìœ ì—¬ë¶€
# =========================================================
def get_sheet():
    if gspread is None or Credentials is None:
        return None
    if "gcp_service_account" not in st.secrets:
        return None

    scopes = [
        "https://www.googleapis.com/auth/spreadsheets",
        "https://www.googleapis.com/auth/drive",
    ]
    info = dict(st.secrets["gcp_service_account"])
    if "private_key" in info and isinstance(info["private_key"], str):
        info["private_key"] = info["private_key"].replace("\\n", "\n")

    creds = Credentials.from_service_account_info(info, scopes=scopes)
    gc = gspread.authorize(creds)
    sh = gc.open_by_key(SPREADSHEET_ID)
    ws = sh.worksheet(SHEET_NAME)
    return ws

def normalize_phone(phone: str) -> str:
    return re.sub(r"[^0-9]", "", phone or "")

def read_all_rows(ws):
    return ws.get_all_values()

def count_winners(ws) -> int:
    values = read_all_rows(ws)
    winners = 0
    for row in values[1:] if len(values) > 0 else []:
        if len(row) < 6:
            continue
        try:
            sec = float(row[4])
        except Exception:
            continue
        if 20.160 <= sec <= 20.169:
            winners += 1
    return winners

def phone_exists(ws, phone_norm: str) -> bool:
    values = read_all_rows(ws)
    for row in values[1:] if len(values) > 0 else []:
        if len(row) < 3:
            continue
        if normalize_phone(row[2]) == phone_norm and phone_norm != "":
            return True
    return False

def append_entry(ws, name, phone, lang, seconds, shared_bool):
    now_str = datetime.now().strftime("%Y-%m-%d %H:%M:%S")
    ws.append_row([now_str, name, phone, lang, f"{seconds:.3f}", str(bool(shared_bool))])

# =========================================================
# 6) Share Image (server-side PNG)  âœ… ê°¤ëŸ¬ë¦¬ ê³µìœ ìš©
# =========================================================
def make_share_png(lang: str, title: str, lines: list[str]) -> bytes:
    """
    Streamlitì—ì„œ ë‹¤ìš´ë¡œë“œ/ìƒˆíƒ­ì—´ê¸°ë¡œ ì €ì¥ ê°€ëŠ¥í•œ PNG ìƒì„±.
    Pillow ì—†ìœ¼ë©´ í…ìŠ¤íŠ¸ë§Œ ë°˜í™˜í•  ìˆ˜ ì—†ìœ¼ë‹ˆ, Pillow í•„ìˆ˜ë¡œ ë™ì‘í•˜ë„ë¡ ì²˜ë¦¬.
    """
    if Image is None:
        # Pillowê°€ ì—†ìœ¼ë©´ ë¹ˆ PNG ëŒ€ì‹  í…ìŠ¤íŠ¸ JSONì„ ë°˜í™˜(ë‹¤ìš´ë¡œë“œëŠ” ë˜ì§€ë§Œ ì´ë¯¸ì§€ ì•„ë‹˜)
        return json.dumps({"title": title, "lines": lines}, ensure_ascii=False).encode("utf-8")

    W, H = 1080, 1920
    img = Image.new("RGB", (W, H), (161, 140, 209))
    draw = ImageDraw.Draw(img)

    # ê°„ë‹¨ ê·¸ë¼ë°ì´ì…˜(ì¤„ ê·¸ë¦¬ê¸°)
    for y in range(H):
        r = int(161 + (142-161) * (y/H))
        g = int(140 + (197-140) * (y/H))
        b = int(209 + (252-209) * (y/H))
        draw.line([(0, y), (W, y)], fill=(r, g, b))

    # í°íŠ¸(ê¸°ë³¸)
    try:
        font_title = ImageFont.truetype("DejaVuSans.ttf", 56)
        font_body = ImageFont.truetype("DejaVuSans.ttf", 42)
        font_small = ImageFont.truetype("DejaVuSans.ttf", 36)
    except Exception:
        font_title = ImageFont.load_default()
        font_body = ImageFont.load_default()
        font_small = ImageFont.load_default()

    # ì¹´ë“œ
    card_margin = 70
    card = (card_margin, 140, W-card_margin, H-140)
    draw.rounded_rectangle(card, radius=42, fill=(255, 255, 255), outline=(230, 230, 240), width=4)

    x0, y0, x1, y1 = card
    cur_y = y0 + 80

    # ì œëª©
    draw.text((x0+70, cur_y), title, fill=(43, 35, 80), font=font_title)
    cur_y += 120

    # ë³¸ë¬¸(ì¤„ë°”ê¿ˆ ì²˜ë¦¬)
    max_width = x1 - x0 - 140

    def wrap(text, font):
        words = list(text)
        lines_out = []
        buf = ""
        for ch in words:
            test = buf + ch
            w = draw.textlength(test, font=font)
            if w > max_width and buf:
                lines_out.append(buf)
                buf = ch
            else:
                buf = test
        if buf:
            lines_out.append(buf)
        return lines_out

    for line in lines:
        wrapped = wrap(line, font_body)
        for wline in wrapped:
            draw.text((x0+70, cur_y), wline, fill=(59, 49, 104), font=font_body)
            cur_y += 58
        cur_y += 12

    # í•˜ë‹¨ URL
    draw.text((x0+70, y1-120), APP_URL, fill=(107, 79, 214), font=font_small)

    buf = BytesIO()
    img.save(buf, format="PNG")
    return buf.getvalue()

def png_to_data_url(png_bytes: bytes) -> str:
    b64 = base64.b64encode(png_bytes).decode("utf-8")
    return f"data:image/png;base64,{b64}"

# =========================================================
# 7) Session State
# =========================================================
if "lang" not in st.session_state:
    st.session_state.lang = "ko"
if "name" not in st.session_state:
    st.session_state.name = ""
if "y" not in st.session_state:
    st.session_state.y = 2005
if "m" not in st.session_state:
    st.session_state.m = 1
if "d" not in st.session_state:
    st.session_state.d = 1
if "stage" not in st.session_state:
    st.session_state.stage = "input"  # input / result
if "mbti" not in st.session_state:
    st.session_state.mbti = None

# share attempt bonus
if "shared" not in st.session_state:
    st.session_state.shared = False
if "max_attempts" not in st.session_state:
    st.session_state.max_attempts = 1

# mini-game
if "attempts_used" not in st.session_state:
    st.session_state.attempts_used = 0
if "show_win_form" not in st.session_state:
    st.session_state.show_win_form = False
if "win_seconds" not in st.session_state:
    st.session_state.win_seconds = None

# share image cache
if "share_png" not in st.session_state:
    st.session_state.share_png = None
if "share_text" not in st.session_state:
    st.session_state.share_text = ""

# =========================================================
# 8) UI Style
# =========================================================
st.markdown("""
<style>
.block-container { padding-top: 1.0rem; padding-bottom: 2.5rem; max-width: 720px; }
.card {
  background: rgba(255,255,255,0.96);
  border-radius: 18px;
  padding: 18px 16px;
  box-shadow: 0 10px 28px rgba(0,0,0,0.10);
  border: 1px solid rgba(140,120,200,0.18);
  margin: 12px 0;
}
.header-hero {
  border-radius: 20px;
  padding: 18px 16px;
  background: linear-gradient(135deg, #a18cd1 0%, #fbc2eb 50%, #8ec5fc 100%);
  color: white;
  text-align: center;
  box-shadow: 0 12px 30px rgba(0,0,0,0.18);
  margin-bottom: 14px;
}
.hero-title { font-size: 1.5rem; font-weight: 900; margin: 0; }
.hero-sub { font-size: 0.95rem; opacity: 0.95; margin-top: 6px; }
.badge {
  display:inline-block;
  padding: 4px 10px;
  border-radius: 999px;
  font-size: 0.85rem;
  background: rgba(255,255,255,0.20);
  border: 1px solid rgba(255,255,255,0.25);
  margin-top: 10px;
}
.soft-box {
  background: rgba(245,245,255,0.78);
  border: 1px solid rgba(130,95,220,0.18);
  padding: 12px 12px;
  border-radius: 14px;
  line-height: 1.65;
  font-size: 1.0rem;
}
.bigbtn > button {
  border-radius: 999px !important;
  font-weight: 900 !important;
  padding: 0.75rem 1.2rem !important;
}
.adbox {
  background: rgba(255,255,255,0.96);
  border-radius: 18px;
  padding: 16px;
  margin: 12px 0;
  border: 2px solid rgba(255, 140, 80, 0.55);
  box-shadow: 0 10px 28px rgba(0,0,0,0.08);
  text-align:center;
}
.adplaceholder {
  background: rgba(255,255,255,0.75);
  border-radius: 18px;
  padding: 14px;
  margin: 12px 0;
  border: 2px dashed rgba(170, 130, 220, 0.55);
  text-align:center;
  color: rgba(60,40,110,0.85);
}
.small-note {
  font-size: 0.92rem;
  opacity: 0.88;
  text-align:center;
  margin-top: 8px;
}
hr.soft { border:0; height:1px; background: rgba(120, 90, 210, 0.15); margin: 14px 0; }
</style>
""", unsafe_allow_html=True)

# =========================================================
# 9) Language picker + SEO
# =========================================================
lang_labels = [label for _, label in LANGS]
lang_codes = [code for code, _ in LANGS]
current_idx = lang_codes.index(st.session_state.lang) if st.session_state.lang in lang_codes else 0
picked = st.radio(T[st.session_state.lang]["lang_pick"], lang_labels, index=current_idx, horizontal=True)
st.session_state.lang = lang_codes[lang_labels.index(picked)]
t = T[st.session_state.lang]
inject_seo(st.session_state.lang)

# =========================================================
# 10) MBTI test (simple: pick directly only for now, ì•ˆì •ì„± ìš°ì„ )
#     (ì›í•˜ë©´ 12/16 í…ŒìŠ¤íŠ¸ë„ ë‹¤ì‹œ ë„£ì–´ì¤„ ìˆ˜ ìˆì§€ë§Œ ì§€ê¸ˆì€ ì˜¤ë¥˜ ì•ˆì •í™”ê°€ ìš°ì„ ì´ë¼ ìµœì†Œí™”)
# =========================================================
MBTI_LIST = sorted(MBTI_DESC.keys())

# =========================================================
# 11) Stop watch (same as ì´ì „ ì•ˆì • ë²„ì „)
# =========================================================
def stopwatch_component(key: str):
    elapsed = st.components.v1.html(
        """
<div style="
  background: rgba(255,255,255,0.96);
  border-radius: 18px;
  padding: 16px;
  border: 1px solid rgba(140,120,200,0.18);
  box-shadow: 0 10px 28px rgba(0,0,0,0.08);
  text-align:center;
">
  <div style="font-weight:900;font-size:1.15rem;color:#2b2350;margin-bottom:10px;">
    â±ï¸ STOPWATCH
  </div>

  <div id="display" style="
    font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, 'Liberation Mono', monospace;
    font-weight:900;
    font-size: 54px;
    letter-spacing: 2px;
    padding: 14px 10px;
    border-radius: 14px;
    background: rgba(245,245,255,0.85);
    border: 1px solid rgba(130,95,220,0.20);
    color: #1f1747;
  ">00:00.000</div>

  <div style="display:flex; gap:10px; justify-content:center; margin-top:12px;">
    <button id="startBtn" style="
      flex:1; max-width: 240px;
      border:none; border-radius: 999px;
      padding: 12px 14px;
      font-weight:900;
      background:#6b4fd6; color:white;
      cursor:pointer;
    ">START</button>

    <button id="stopBtn" style="
      flex:1; max-width: 240px;
      border:none; border-radius: 999px;
      padding: 12px 14px;
      font-weight:900;
      background:#ff8c50; color:white;
      cursor:pointer;
    ">STOP</button>
  </div>

  <div style="margin-top:10px; font-size:0.92rem; opacity:0.85;">
    START í›„ STOPì„ ëˆŒëŸ¬ ê¸°ë¡ì„ ì œì¶œí•˜ì„¸ìš”.
  </div>
</div>

<script>
(function() {
  let running = false;
  let startTime = 0;
  let rafId = null;
  const display = document.getElementById("display");
  const startBtn = document.getElementById("startBtn");
  const stopBtn = document.getElementById("stopBtn");

  function fmt(ms) {
    const total = Math.max(0, ms);
    const m = Math.floor(total / 60000);
    const s = Math.floor((total % 60000) / 1000);
    const mm = Math.floor(total % 1000);
    return String(m).padStart(2,'0') + ":" + String(s).padStart(2,'0') + "." + String(mm).padStart(3,'0');
  }

  function tick() {
    if (!running) return;
    const now = performance.now();
    display.textContent = fmt(now - startTime);
    rafId = requestAnimationFrame(tick);
  }

  function sendValue(val) {
    window.parent.postMessage({
      isStreamlitMessage: true,
      type: "streamlit:setComponentValue",
      value: val
    }, "*");
  }

  startBtn.addEventListener("click", () => {
    running = true;
    startTime = performance.now();
    display.textContent = "00:00.000";
    if (rafId) cancelAnimationFrame(rafId);
    rafId = requestAnimationFrame(tick);
  });

  stopBtn.addEventListener("click", () => {
    if (!running) return;
    running = false;
    if (rafId) cancelAnimationFrame(rafId);
    const now = performance.now();
    const elapsedSec = (now - startTime) / 1000.0;
    sendValue(elapsedSec);
  });
})();
</script>
""",
        height=260,
        key=key
    )
    return elapsed

# =========================================================
# 12) Screens
# =========================================================
def render_input():
    st.markdown(f"""
    <div class="header-hero">
      <p class="hero-title">ğŸ”® {t["title"]}</p>
      <p class="hero-sub">{t["subtitle"]}</p>
      <span class="badge">2026</span>
    </div>
    """, unsafe_allow_html=True)

    st.session_state.name = st.text_input(t["name"], value=st.session_state.name)

    st.markdown(f"<div class='card'><b>{t['birth']}</b></div>", unsafe_allow_html=True)
    c1, c2, c3 = st.columns(3)
    st.session_state.y = c1.number_input(t["year"], 1900, 2030, st.session_state.y, 1)
    st.session_state.m = c2.number_input(t["month"], 1, 12, st.session_state.m, 1)
    st.session_state.d = c3.number_input(t["day"], 1, 31, st.session_state.d, 1)

    mbti_pick = st.selectbox("MBTI", MBTI_LIST, index=MBTI_LIST.index("ENFP") if "ENFP" in MBTI_LIST else 0)

    st.markdown('<div class="bigbtn">', unsafe_allow_html=True)
    if st.button(t["go_result"], use_container_width=True):
        st.session_state.mbti = mbti_pick
        st.session_state.stage = "result"
        st.rerun()
    st.markdown('</div>', unsafe_allow_html=True)

def render_share_block(share_title: str, share_lines: list[str]):
    """
    âœ… navigator.share ëŒ€ì‹ :
    - ë²„íŠ¼ ëˆ„ë¥´ë©´ PNG ìƒì„±
    - ì´ë¯¸ì§€ í‘œì‹œ + ë‹¤ìš´ë¡œë“œ + ìƒˆíƒ­ì—´ê¸°(ì €ì¥) ì œê³µ
    - ê³µìœ  ë²„íŠ¼ ëˆ„ë¥´ë©´ 1íšŒ ì¶”ê°€(ìš”ì²­ ë¡œì§)
    """
    st.markdown('<div class="bigbtn">', unsafe_allow_html=True)
    clicked = st.button(t["share_btn"], use_container_width=True)
    st.markdown('</div>', unsafe_allow_html=True)
    st.caption(t["share_hint"])

    if clicked:
        if not st.session_state.shared:
            st.session_state.shared = True
            st.session_state.max_attempts = 2

        png_bytes = make_share_png(st.session_state.lang, share_title, share_lines)
        st.session_state.share_png = png_bytes
        st.session_state.share_text = "\n".join(share_lines)

    if st.session_state.share_png:
        st.markdown(f"<div class='card'><b>{t['share_image_title']}</b></div>", unsafe_allow_html=True)

        # í™”ë©´ì— ì´ë¯¸ì§€ í‘œì‹œ
        if Image is not None:
            st.image(st.session_state.share_png, use_container_width=True)

        # ë‹¤ìš´ë¡œë“œ ë²„íŠ¼
        st.download_button(
            t["download_image"],
            data=st.session_state.share_png,
            file_name="2026_fortune_share.png",
            mime="image/png",
            use_container_width=True
        )

        # ìƒˆ íƒ­ ì—´ê¸°(ì €ì¥->ê°¤ëŸ¬ë¦¬ ê³µìœ )
        data_url = png_to_data_url(st.session_state.share_png)
        st.markdown(
            f"""
<div class="card" style="text-align:center;">
  <a href="{data_url}" target="_blank"
     style="display:inline-block;background:#6b4fd6;color:white;
     padding:10px 16px;border-radius:999px;font-weight:900;text-decoration:none;">
    {t["open_image"]}
  </a>
  <div class="small-note">â€» ìƒˆ íƒ­ì—ì„œ ì´ë¯¸ì§€ë¥¼ â€˜ê¸¸ê²Œ ëˆŒëŸ¬ ì €ì¥â€™í•˜ë©´ ê°¤ëŸ¬ë¦¬ì—ì„œ ê³µìœ  ë²„íŠ¼ì´ ëœ¹ë‹ˆë‹¤.</div>
</div>
""",
            unsafe_allow_html=True
        )

def render_result():
    lang = st.session_state.lang
    s = t["sections"]

    y, m, d = st.session_state.y, st.session_state.m, st.session_state.d
    zodiac_key = calc_zodiac_key(y)

    zodiac_label = ZODIAC_LABEL[zodiac_key].get(lang, ZODIAC_LABEL[zodiac_key]["en"])
    zodiac_desc = ZODIAC_TEXT[zodiac_key].get(lang, ZODIAC_TEXT[zodiac_key]["en"])

    mbti = st.session_state.mbti or "ENFP"
    mbti_line = MBTI_DESC.get(mbti, {}).get(lang, MBTI_DESC.get(mbti, {}).get("en", mbti))

    name = (st.session_state.name or "").strip()
    display_name = f"{name}ë‹˜" if (lang == "ko" and name) else (name if name else "")

    saju = get_saju(lang, y, m, d)
    today = seeded_daily(lang, zodiac_key, 0)
    tomorrow = seeded_daily(lang, zodiac_key, 1)
    overall = year_overall(lang, zodiac_key, mbti)

    advice = combo_advice(lang, mbti)
    advice_lines = advice.splitlines()
    love = advice_lines[0] if len(advice_lines) > 0 else ""
    money = advice_lines[1] if len(advice_lines) > 1 else ""
    work = advice_lines[2] if len(advice_lines) > 2 else ""
    health = advice_lines[3] if len(advice_lines) > 3 else ""

    st.markdown(f"""
    <div class="header-hero">
      <p class="hero-title">{display_name} {('2026ë…„ ìš´ì„¸' if lang=='ko' else '2026 Fortune')}</p>
      <p class="hero-sub">{zodiac_label} Â· {mbti}</p>
      <span class="badge">{t["best_combo"]}</span>
    </div>
    """, unsafe_allow_html=True)

    # ê²°ê³¼ ì¹´ë“œ
    st.markdown("<div class='card'>", unsafe_allow_html=True)
    st.markdown(f"**{s['zodiac']}**: {zodiac_desc}")
    st.markdown(f"**{s['mbti']}**: {mbti_line}")
    st.markdown(f"**{s['saju']}**: {saju}")
    st.markdown("<hr class='soft'/>", unsafe_allow_html=True)
    st.markdown(f"**{s['today']}**: {today}")
    st.markdown(f"**{s['tomorrow']}**: {tomorrow}")
    st.markdown("<hr class='soft'/>", unsafe_allow_html=True)
    st.markdown(f"**{s['year_all']}**: {overall}")
    st.markdown("</div>", unsafe_allow_html=True)

    st.markdown("<div class='card'>", unsafe_allow_html=True)
    st.markdown(f"**{s['love']}**: {love}")
    st.markdown(f"**{s['money']}**: {money}")
    st.markdown(f"**{s['work']}**: {work}")
    st.markdown(f"**{s['health']}**: {health}")
    st.markdown("</div>", unsafe_allow_html=True)

    # íƒ€ë¡œ
    if st.button(t["tarot_btn"], use_container_width=True):
        k, meaning = pick_tarot(lang)
        st.markdown(f"""
        <div class="card" style="text-align:center;">
          <div style="font-weight:900;color:#6b4fd6;">{t["tarot_title"]}</div>
          <div style="font-size:1.6rem;font-weight:900;margin-top:6px;">{k}</div>
          <div style="margin-top:8px;" class="soft-box">{meaning}</div>
        </div>
        """, unsafe_allow_html=True)

    # âœ… ê³µìœ (ê°¤ëŸ¬ë¦¬ íë¦„)
    share_title = "2026 ìš´ì„¸ ê²°ê³¼" if lang == "ko" else "2026 Fortune Result"
    share_lines = [
        f"{display_name} 2026 Fortune".strip(),
        f"{zodiac_label} + {mbti}",
        f"{s['today']}: {today}",
        f"{s['tomorrow']}: {tomorrow}",
        f"{s['year_all']}: {overall}",
        f"{s['advice']}:",
        advice,
        APP_URL
    ]
    render_share_block(share_title, share_lines)

    # âœ… ê´‘ê³  ìœ„ì¹˜: â€œë¯¸ë‹ˆê²Œì„ ë°”ë¡œ ìœ„â€ ê³ ì • (ìš”ì²­ì‚¬í•­)
    st.markdown(f"<div class='adplaceholder'>{t['ad_placeholder']}</div>", unsafe_allow_html=True)
    if lang == "ko":
        st.markdown(f"""
        <div class="adbox">
          <small style="font-weight:900;color:#e74c3c;">ê´‘ê³ </small><br>
          <div style="font-size:1.15rem;font-weight:900;margin-top:6px;">{t["ad_kr_title"]}</div>
          <div style="margin-top:6px;">{t["ad_kr_body1"]}</div>
          <div>{t["ad_kr_body2"]}</div>
          <div style="margin-top:10px;">
            <a href="{t["ad_kr_url"]}" target="_blank"
               style="display:inline-block;background:#ff8c50;color:white;
               padding:10px 16px;border-radius:999px;font-weight:900;text-decoration:none;">
              {t["ad_kr_link"]}
            </a>
          </div>
        </div>
        """, unsafe_allow_html=True)

    # ë¯¸ë‹ˆê²Œì„(í•œêµ­ì–´ë§Œ)
    if lang == "ko":
        st.markdown(
            f"<div class='card'><div style='font-weight:900;font-size:1.2rem;'>{t['mini_title']}</div>"
            f"<div style='margin-top:8px;' class='soft-box'>{t['mini_desc']}</div></div>",
            unsafe_allow_html=True
        )

        ws = get_sheet()
        sheet_ready = ws is not None
        if not sheet_ready:
            st.warning(t["sheet_fail"])
        else:
            st.success(t["sheet_ok"])

        closed = False
        if sheet_ready:
            try:
                closed = (count_winners(ws) >= 20)
            except Exception:
                closed = False

        tries_left = max(0, st.session_state.max_attempts - st.session_state.attempts_used)
        st.markdown(
            f"<div class='small-note'>{t['mini_try_left']}: <b>{tries_left}</b> / {st.session_state.max_attempts}</div>",
            unsafe_allow_html=True
        )

        if closed:
            st.info(t["mini_closed"])
        else:
            elapsed = stopwatch_component("stopwatch_v2")
            if elapsed is not None:
                if tries_left <= 0:
                    st.warning("ë‚¨ì€ ì‹œë„ê°€ ì—†ìŠµë‹ˆë‹¤.")
                else:
                    st.session_state.attempts_used += 1
                    st.markdown(f"<div class='card'><b>ê¸°ë¡</b>: {float(elapsed):.3f}s</div>", unsafe_allow_html=True)

                    if 20.160 <= float(elapsed) <= 20.169:
                        st.session_state.show_win_form = True
                        st.session_state.win_seconds = float(elapsed)
                    else:
                        st.info("ì•„ì‰½ê²Œë„ ë¯¸ë‹¬/ì´ˆê³¼! ë‹¤ì‹œ ë„ì „í•´ë³´ì„¸ìš” ğŸ™‚")

            if st.session_state.show_win_form and st.session_state.win_seconds is not None:
                st.markdown("<div class='card'>", unsafe_allow_html=True)
                st.markdown(f"### {t['win_title']}")
                st.markdown(f"**ê¸°ë¡:** {st.session_state.win_seconds:.3f}s")

                nm = st.text_input(t["win_name"], value=(st.session_state.name or "").strip(), key="win_name_input")
                ph = st.text_input(t["win_phone"], value="", key="win_phone_input")
                ph_norm = normalize_phone(ph)

                consent = st.checkbox(
                    f"{t['win_consent']}  \n{t['win_consent_text']}",
                    value=False,
                    key="consent_chk"
                )

                if st.button(t["win_submit"], use_container_width=True):
                    if not sheet_ready:
                        st.error(t["sheet_fail"])
                    elif not consent:
                        st.warning("ë™ì˜ê°€ í•„ìš”í•©ë‹ˆë‹¤.")
                    elif nm.strip() == "" or ph_norm == "":
                        st.warning("ì´ë¦„/ì „í™”ë²ˆí˜¸ë¥¼ ì •í™•íˆ ì…ë ¥í•´ì£¼ì„¸ìš”.")
                    else:
                        try:
                            if phone_exists(ws, ph_norm):
                                st.warning(t["mini_dup"])
                            else:
                                if count_winners(ws) >= 20:
                                    st.info(t["mini_closed"])
                                else:
                                    append_entry(ws, nm.strip(), ph_norm, lang, float(st.session_state.win_seconds), st.session_state.shared)
                                    st.success(t["win_thanks"])
                                    st.session_state.show_win_form = False
                                    st.session_state.win_seconds = None
                        except Exception as e:
                            st.error(f"ì €ì¥ ì¤‘ ì˜¤ë¥˜: {e}")

                st.markdown("</div>", unsafe_allow_html=True)

    # ê²€ìƒ‰/AI ë…¸ì¶œ ì„¹ì…˜
    st.markdown("<div class='card'>", unsafe_allow_html=True)
    st.markdown(f"### {t['faq_title']}")
    if lang == "ko":
        st.markdown("- **2026 ìš´ì„¸/ë ìš´ì„¸/MBTI ìš´ì„¸/ì‚¬ì£¼/ì˜¤ëŠ˜ìš´ì„¸/ë‚´ì¼ìš´ì„¸**ë¥¼ ë¬´ë£Œë¡œ ì œê³µí•©ë‹ˆë‹¤.")
        st.markdown("- MBTI(E/I, S/N, T/F, J/P) ì„±í–¥ì„ ë°˜ì˜í•´ **ì—°ì• Â·ì¬ë¬¼Â·ì¼/í•™ì—…Â·ê±´ê°•** ì¡°ì–¸ì„ ì œê³µí•©ë‹ˆë‹¤.")
        st.markdown("- í•œêµ­ì–´ í™”ë©´ì—ëŠ” ì„ ì°©ìˆœ ì´ë²¤íŠ¸ ë¯¸ë‹ˆê²Œì„(êµ¬ê¸€ì‹œíŠ¸ ì €ì¥)ì´ í¬í•¨ë©ë‹ˆë‹¤.")
    else:
        st.markdown("- Free 2026 zodiac + MBTI-based advice + saju + today/tomorrow fortune.")
        st.markdown("- MBTI traits (E/I, S/N, T/F, J/P) influence practical advice.")
    st.markdown("</div>", unsafe_allow_html=True)

    if st.button(t["reset"], use_container_width=True):
        st.session_state.clear()
        st.rerun()

    st.caption(APP_URL)

# =========================================================
# 13) Router
# =========================================================
if st.session_state.stage == "input":
    render_input()
else:
    render_result()
